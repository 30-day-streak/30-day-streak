(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},59:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),r=a(33),c=a.n(r),l=(a(40),a(12)),i=a(2),o=a(3),h=a(5),u=a(4),d=(a(41),a(8)),p=a(9),g=a(6),j=a.n(g),b=function(e,t,a,s,n){return j.a.post("/auth/signup",{username:e,password:t,name:a,lastName:s,email:n}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},O=function(e,t){return j.a.post("/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={username:"",password:"",message:"",name:"",lastName:"",email:""},e.handleChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState(Object(p.a)({},s,n))},e.handleSubmit=function(t){t.preventDefault(),console.log("TARGET",t.target,"STATE",e.state);var a=e.state,s=a.username,n=a.password,r=a.name,c=a.lastName,l=a.email;b(s,n,r,c,l).then((function(t){console.log(t),t.message?e.setState({message:t.message,username:"",password:"",name:"",lastName:"",email:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Sign Up"}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(s.jsx)("input",{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(s.jsx)("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange})]}),this.state.message&&Object(s.jsx)("p",{children:this.state.message}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(s.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,onChange:this.handleChange})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"lastName",children:"Last Name: "}),Object(s.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:this.state.lastName,onChange:this.handleChange})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email: "}),Object(s.jsx)("input",{type:"email",id:"email",name:"email",value:this.state.email,onChange:this.handleChange})]}),Object(s.jsx)("button",{type:"submit",children:"Sign Up"})]})]})}}]),a}(n.Component),x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,s=a.name,n=a.value;e.setState(Object(p.a)({},s,n))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,s=a.username,n=a.password;O(s,n).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Log In"}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(s.jsx)("input",{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(s.jsx)("input",{type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange})]}),this.state.message&&Object(s.jsx)("p",{children:this.state.message}),Object(s.jsx)("button",{type:"submit",children:"Log In"})]})]})}}]),a}(n.Component),m=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).handleChange=function(e){var t=e.target.name,a=e.target.value;s.setState(Object(p.a)({},t,a)),console.log(s.state)},s.resetState=function(){s.setState(s.initialState)},s.handleSubmit=function(e){e.preventDefault(),j.a.post("/rewards",{name:s.state.name,description:s.state.description,category:s.state.category,url:s.state.url}).then((function(e){console.log("axios response",e),s.props.toggleFavouriteReward(e.data._id,!0),s.resetState(),s.props.forceRewardListUpdate()})).catch((function(e){return console.log(e)}))},s.toggleAddReward=function(){s.setState((function(e){return{showForm:!e.showForm}}))},s.state={name:"",description:"",category:"",url:"",showForm:!1},s.initialState=s.state,s}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{onClick:this.toggleAddReward,children:"Create a new reward"}),this.state.showForm&&Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Need some ideas for incentives to achieving your goals?"}),Object(s.jsxs)("p",{children:["Check out what ",Object(s.jsx)("a",{href:"#",children:"other users have added"})," or see if there is something you like on",Object(s.jsx)("a",{href:"https://www.developgoodhabits.com/reward-yourself/",target:"_blank",children:" this list "}),"or ",Object(s.jsx)("a",{href:"https://organisemyhouse.com/reward-yourself/",target:"_blank",children:"this one"}),"."]}),Object(s.jsx)("br",{}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("label",{htmlFor:"name",children:"Name"}),Object(s.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,placeholder:"Give your reward a name",onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"description",children:"Description"}),Object(s.jsx)("input",{type:"text",id:"description",name:"description",value:this.state.description,placeholder:"Add a more detailed description if you need one",onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"category",children:"Category"}),Object(s.jsxs)("select",{id:"category",name:"category",value:this.state.category,onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"Food",children:"Food"}),Object(s.jsx)("option",{value:"Activity/Experience",children:"Activity/Experience"}),Object(s.jsx)("option",{value:"",selected:"selected",children:"Select a category"}),Object(s.jsx)("option",{value:"Gift",children:"Gift"}),Object(s.jsx)("option",{value:"Self-care",children:"Self-care"}),Object(s.jsx)("option",{value:"Other",children:"Other"})]}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"url",children:"Link"}),Object(s.jsx)("input",{type:"text",id:"url",name:"url",value:this.state.url,placeholder:"You can add a link to an internet page here",onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{type:"submit",children:"Save to my list of rewards"}),Object(s.jsx)("button",{type:"cancel",onClick:this.resetState,children:"Cancel"})]})]})]})}}]),a}(n.Component),v=a(7);a(59);function y(e){var t=function(e){console.log("logout"),j.a.delete("/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)})),console.log("logout successful")};return Object(s.jsxs)("nav",{className:"navbar",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)(v.b,{className:"link",to:"/",children:"Home"})}),e.user?Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)(v.b,{className:"link",to:"/challenges",children:"Challenges"}),Object(s.jsx)(v.b,{className:"link",to:"/rewards",children:"Rewards"}),Object(s.jsx)(v.b,{className:"link",to:"/profile",children:"Profile"}),Object(s.jsx)(v.b,{className:"link",to:"/login",onClick:function(){return t(e)},children:"Log Out"})]}):Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)(v.b,{to:"/signup",children:"Sign Up"}),Object(s.jsx)(v.b,{to:"/login",children:"Log In"})]})]})}a(68);var C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).handleChange=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value;e.props.setFilter(a,s)},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"filter-bar",children:[Object(s.jsx)("div",{className:"filter",children:Object(s.jsx)("input",{type:"text",placeholder:"Search...",name:"searchFilter",onChange:this.handleChange})}),Object(s.jsx)("div",{className:"filter",children:Object(s.jsxs)("select",{name:"categoryFilter",id:"categoryFilter",onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"",children:"Category"}),this.props.categories.map((function(e){return Object(s.jsx)("option",{children:e})}))]})}),Object(s.jsxs)("div",{className:"filter",children:[Object(s.jsx)("input",{type:"checkbox",id:"favoritesFilter",name:"favoritesFilter",onChange:this.handleChange}),Object(s.jsx)("label",{htmlFor:"favoritesFilter",children:"My Favorites"})]})]})}}]),a}(n.Component),w=(a(22),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={favorite:""},e.toggleFavorite=function(){var t=!e.state.favorite;e.setState({favorite:t});var a=e.props.challenge._id;j.a.put("/users/".concat(a,"/challengesfavorite"),{favorite:t}),e.props.getData()},e.initialSetUp=function(){var t=e.props.user.challenges.some((function(t){return t.id._id===e.props.challenge._id&&"favorite"===t.status}));e.setState({favorite:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.initialSetUp()}},{key:"componentDidUpdate",value:function(e,t){e.filtered.length!==this.props.filtered.length&&this.initialSetUp()}},{key:"render",value:function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("div",{className:"card-header",children:[Object(s.jsx)("p",{children:this.props.challenge.category}),Object(s.jsx)("img",{src:this.state.favorite?"/images/favorite.png":"/images/unfavorite.png",onClick:this.toggleFavorite,alt:"favorite"})]}),Object(s.jsx)("h3",{children:this.props.challenge.title}),Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:this.props.challenge.goal&&this.props.challenge.goal}),Object(s.jsx)(v.b,{to:"/challenges/".concat(this.props.challenge._id,"/start"),children:Object(s.jsx)("button",{children:"Start"})})]},this.props.challenge._id)})}}]),a}(n.Component)),k=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={challenges:[],searchFilter:"",categoryFilter:"",favoritesFilter:!1},e.getData=function(){j.a.get("/challenges").then((function(t){e.setState({challenges:t.data})})).catch((function(e){return console.log(e)}))},e.setFilter=function(t,a){e.setState(Object(p.a)({},t,a))},e.filter=function(){var t=e.props.user.challenges.filter((function(e){return"favorite"===e.status})).map((function(e){return e.id._id})),a=e.props.user.challenges.filter((function(e){return"active"===e.status||"completed"===e.status||"withdrawn"===e.status})).map((function(e){return e.id._id}));return e.state.favoritesFilter?e.state.challenges.filter((function(e){return t.includes(e._id)})):e.state.challenges.filter((function(t){return"".concat(t.title).concat(t.goal).toLowerCase().includes(e.state.searchFilter.toLowerCase())&&(e.state.categoryFilter===t.category||!e.state.categoryFilter)&&!a.includes(t._id)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=this.filter(),a=this.state.challenges.map((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"tool-bar",children:[Object(s.jsx)(C,{categories:a,setFilter:this.setFilter}),Object(s.jsx)(v.b,{to:"/challenges/create",children:Object(s.jsx)("img",{src:"/images/plus.png"})})]}),Object(s.jsx)("div",{className:"challenges-container",children:t.map((function(a){return Object(s.jsx)(w,{challenge:a,user:e.props.user,getData:e.getData,filtered:t})}))})]})}}]),a}(n.Component),S=a(11),D=a.n(S),N=a(17),F=(a(70),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={title:"",goal:"",dailyTargetDescription:"",category:"eat",user:e.props.user,challengeID:""},e.handleChange=function(t){var a=t.target.name,s=t.target.value;e.setState(Object(p.a)({},a,s))},e.handleSubmitLater=function(){var t=Object(N.a)(D.a.mark((function t(a){var s,n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("clicked"),a.preventDefault(),console.log("user before post",e.state.user),s=e.state.user._id,t.prev=4,t.next=7,j.a.post("/challenges",{title:e.state.title,goal:e.state.goal,dailyTarget:{description:e.state.dailyTargetDescription},category:e.state.category});case 7:return n=t.sent,r=e.props.user,console.log("user",e.props.user),r.challenges.unshift({id:n.data._id,status:"favorite",tracker:[]}),e.setState({user:e.props.user}),console.log("user after set state",e.state.user),t.next=15,j.a.put("/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 15:t.sent,e.props.history.push("/challenges"),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[4,19]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmitStart=function(){var t=Object(N.a)(D.a.mark((function t(a){var s,n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=e.state.user._id,t.prev=2,t.next=5,j.a.post("/challenges",{title:e.state.title,goal:e.state.goal,dailyTarget:{description:e.state.dailyTargetDescription},category:e.state.category});case 5:return n=t.sent,e.props.user.challenges.unshift({id:n.data._id,status:"active",tracker:[]}),e.setState({user:e.props.user}),t.next=11,j.a.put("/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 11:t.sent,e.props.history.push("/challenges/".concat(n.data._id,"/start")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"create-challenge-page",children:Object(s.jsxs)("form",{className:"create-challenge-form",id:"create-challenge-form",children:[Object(s.jsx)("h1",{children:"Create a Challenge"}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"title",children:"Name your challenge: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"title",name:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Example: Get More Sleep",required:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"goal",children:"What do you want to accomplish with this challenge?"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"goal",name:"goal",value:this.state.goal,onChange:this.handleChange,placeholder:"Example: Improve my sleep habits so I feel more rested and alert throughout the day",required:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"dailyTargetDescription",children:"What will you do every day to meet this goal?"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"dailyTargetDescription",name:"dailyTargetDescription",value:this.state.dailyTargetDescription,onChange:this.handleChange,placeholder:"Example: Get 8 hours of sleep each night",required:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item create-challenge-form-select",children:[Object(s.jsx)("label",{htmlFor:"category",children:"What category does your challenge fall into?"}),Object(s.jsx)("br",{}),Object(s.jsxs)("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange,required:!0,children:[Object(s.jsx)("option",{value:"eat",children:"Eat"}),Object(s.jsx)("option",{value:"train",children:"Train"}),Object(s.jsx)("option",{value:"habit",children:"Habit"}),Object(s.jsx)("option",{value:"skill",children:"Skill"}),Object(s.jsx)("option",{value:"other",children:"Other"})]})]}),Object(s.jsx)("button",{className:"button-light",form:"create-challenge-form",onClick:this.handleSubmitLater,children:"Save for later"}),Object(s.jsx)("button",{className:"button-dark",form:"create-challenge-form",onClick:this.handleSubmitStart,children:"Start now!"})]})})})}}]),a}(n.Component)),T=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={title:"",goal:"",dailyTargetDescription:"",dailyTargetNumber:"",dailyTargetUnit:"",prize:"",user:""},e.handleChange=function(t){var a=t.target.name,s=t.target.value;e.setState(Object(p.a)({},a,s))},e.getData=function(){var t=e.props.match.params.id;j.a.get("/challenges/".concat(t)).then((function(t){e.setState({title:t.data.title,goal:t.data.goal,dailyTargetDescription:t.data.dailyTarget.description,dailyTargetNumber:t.data.dailyTarget.number,dailyTargetUnit:t.data.dailyTarget.unit})})).catch((function(e){console.log("error",e)}))},e.componentDidMount=function(){e.getData(),e.setState({user:e.props.user})},e.handleSubmit=function(){var t=Object(N.a)(D.a.mark((function t(a){var s,n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=e.state.user._id,n=e.props.match.params.id,t.prev=3,r=e.props.user,r.challenges.some((function(e){return e.id._id===n}))?r=r.challenges.map((function(t){return t.id._id===n&&(t.status="active",t.startDate=new Date,t.tracker=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.grandPrize=e.state.prize),t})):r.challenges.unshift({id:e.props.match.params.id,status:"active",tracker:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],startDate:new Date,grandPrize:e.state.prize}),e.setState({user:e.props.user}),console.log("user challlenges after set state",e.state.user.challenges),console.log("user rewards after set state",e.state.user.rewards),t.next=12,j.a.put("/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 12:t.sent,e.props.history.push("/"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"start-challenge-page",children:Object(s.jsxs)("div",{className:"start-challenge-page-content",children:[Object(s.jsx)("h1",{children:"Congratulations!"}),Object(s.jsx)("h2",{children:"Here is the information for the CHALLENGE you're starting TODAY!"}),Object(s.jsx)("h3",{children:this.state.title}),Object(s.jsxs)("p",{children:["Goal: ",this.state.goal]}),Object(s.jsxs)("p",{children:["Daily target: ",this.state.dailyTargetDescription," ",this.state.dailyTargetNumber," ",this.state.dailyTargetUnit]}),Object(s.jsx)("h2",{children:"Pick your GRAND PRIZE for completing it"}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("label",{htmlFor:"prize",children:"Prize"}),Object(s.jsx)("input",{type:"text",id:"prize",name:"prize",value:this.state.prize,onChange:this.handleChange,required:!0}),Object(s.jsx)("button",{type:"submit",onSubmit:this.handleSubmit,children:"Let's do it!"})]})]})})}}]),a}(n.Component),U=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={favorite:""},e.toggleFavorite=function(){var t=!e.state.favorite,a=e.props.reward._id;j.a.put("/users/".concat(a,"/rewardsfavorite"),{favorite:t}),e.setState({favorite:t}),e.props.getData()},e.initialSetUp=function(){var t=e.props.user.rewards.some((function(t){return t._id===e.props.reward._id}));e.setState({favorite:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.initialSetUp()}},{key:"componentDidUpdate",value:function(e,t){e.filtered.length!==this.props.filtered.length&&this.initialSetUp()}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("div",{className:"card-header",children:[Object(s.jsx)("p",{children:this.props.reward.category}),Object(s.jsx)("img",{src:this.state.favorite?"/images/favorite.png":"/images/unfavorite.png",onClick:this.toggleFavorite,alt:"favorite"})]}),Object(s.jsx)("h3",{children:this.props.reward.name}),Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:this.props.reward.description&&this.props.reward.description}),this.props.reward.url&&Object(s.jsx)("a",{href:"{this.props.reward.url}",children:"Link"})]},this.props.reward._id)}}]),a}(n.Component),A=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={rewards:[],searchFilter:"",categoryFilter:"",favoritesFilter:!1},e.getData=function(){j.a.get("/rewards").then((function(t){console.log({response:t}),e.setState({rewards:t.data})})).catch((function(e){return console.log(e)}))},e.setFilter=function(t,a){e.setState(Object(p.a)({},t,a))},e.filter=function(){var t=e.props.user.rewards.map((function(e){return e._id}));return e.state.favoritesFilter?e.state.rewards.filter((function(e){return t.includes(e._id)})):e.state.rewards.filter((function(t){return"".concat(t.name).concat(t.description).toLowerCase().includes(e.state.searchFilter.toLowerCase())&&(e.state.categoryFilter===t.category||!e.state.categoryFilter)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getData(),console.log("props",this.props)}},{key:"render",value:function(){var e=this,t=this.filter(),a=this.state.rewards.map((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"tool-bar",children:Object(s.jsx)(C,{categories:a,setFilter:this.setFilter})}),Object(s.jsx)(m,Object(l.a)(Object(l.a)({},this.props),{},{forceRewardListUpdate:this.getData})),Object(s.jsx)("div",{className:"challenges-container",children:t.map((function(a){return Object(s.jsx)("div",{children:Object(s.jsx)(U,{reward:a,user:e.props.user,filtered:t,getData:e.getData})},a._id)}))})]})}}]),a}(n.Component),_=(a(71),a(72),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.challenge.tracker,t=this.props.index,a=Number.parseInt(t)+1;return Object(s.jsx)("div",{className:(2===e["".concat(t)]?"failed":1===e["".concat(t)]&&"completed")||0===e["".concat(t)]&&"not-attempted",onClick:this.props.handleChange,id:t,children:a})}}]),a}(n.Component)),E=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={user:""},e.initialSetupTracker=function(){for(var t=e.props.challenge.tracker,a=0;a<t.length;a++){var s=a.toString(),n=t[a];e.setState(Object(p.a)({},s,n))}},e.handleChange=function(){var t=Object(N.a)(D.a.mark((function t(a){var s,n,r,c,l,i;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a.target,n=s.checked,r=s.id,c=e.props.challenge.tracker,l=s.id,!(a.target.id<e.props.challengeDay)){t.next=14;break}return 0===c[l]||1===c[l]?c[l]++:c[l]--,e.setState(Object(p.a)({},r,n)),i=e.state.user._id,t.next=12,j.a.put("/users/".concat(i),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 12:t.sent,e.props.refreshActiveChallengeDetails();case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),e.notifications=function(){},e.componentDidMount=function(){console.log("props at mount",e.props),e.setState({user:e.props.user})},e}return Object(o.a)(a,[{key:"render",value:function(){this.props.challenge.tracker;return Object(s.jsxs)("div",{className:"full-tracker",children:[Object(s.jsx)("p",{children:"click on a day to update the tracker"}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"0",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge,streakStatus:this.props.streakStatus}),Object(s.jsx)(_,{index:"1",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"2",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"3",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"4",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"5",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"6",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"7",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"8",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"9",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"10",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"11",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"12",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"13",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"14",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"15",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"16",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"17",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"18",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"19",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"20",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"21",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"22",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"23",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"24",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"25",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"26",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"27",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"28",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"29",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]})]})}}]),a}(n.Component),L=(a(73),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={refreshToggle:!0},e.refreshActiveChallengeDetails=function(){console.log("toggleIn",e.state.toggle),e.setState({refreshToggle:!e.state.refreshToggle}),console.log("toggleOut",e.state.toggle)},e}return Object(o.a)(a,[{key:"render",value:function(){console.log("props in active challange details",this.props.challenge);var e=this.props.streakStatus(this.props.challenge.tracker,this.props.challengeDay),t=e.currentStreak,a=e.longestStreak;console.log("current streak ".concat(t,", Longest streak ").concat(a));var n=30-this.props.challengeDay;return Object(s.jsxs)("div",{className:"activeContainer",children:[Object(s.jsxs)("p",{className:"progress",children:["Progress day ",this.props.challengeDay]}),Object(s.jsxs)("div",{className:"active-challenge-details-user-info-container",children:[Object(s.jsx)(E,{challenge:this.props.challenge,user:this.props.user,challengeDay:this.props.challengeDay,calculateChallengeDay:this.props.calculateChallengeDay,refreshActiveChallengeDetails:this.refreshActiveChallengeDetails},this.props.challenge.id),Object(s.jsxs)("div",{className:"active-challenge-details-user-info-text",children:[Object(s.jsx)("p",{children:"Challenge started on:"}),Object(s.jsx)("p",{children:"Challenge ends on:"}),Object(s.jsxs)("p",{children:[" ",n," days to go!"]}),Object(s.jsxs)("p",{children:["Current streak: ",t]}),Object(s.jsxs)("p",{children:["Longest streak: ",a]})]}),Object(s.jsx)("div",{className:"active-challenge-details-prize",children:Object(s.jsxs)("p",{children:["EYES ON THE PRIZE: ",Object(s.jsx)("br",{}),this.props.challenge.grandPrize]})})]})]})}}]),a}(n.Component)),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={challengeDay:0,activeChallengeDetails:!1},e.toggleChallengeDetails=function(){e.setState((function(e){return{activeChallengeDetails:!e.activeChallengeDetails}}))},e.handleChange=function(){var t=Object(N.a)(D.a.mark((function t(a){var s,n,r,c,l,i;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a.target,n=s.checked,r=s.id,c=e.props.challenge.tracker,console.log("challengeTracker",c),l=s.id,console.log("challengeDay",e.state.challengeDay),!(a.target.id<=e.state.challengeDay)){t.next=15;break}return 0===c[l]||1===c[l]?c[l]++:c[l]--,e.setState(Object(p.a)({},r,n)),i=e.state.user._id,t.next=14,j.a.put("/users/".concat(i),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 14:t.sent;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.calculateChallengeDay(this.props.challenge.startDate);console.log({challengeDay:e}),this.setState({challengeDay:e})}},{key:"render",value:function(){return console.log("props from preview "),Object(s.jsxs)("div",{className:"active-preview",children:[Object(s.jsx)("div",{className:"preview-title",children:Object(s.jsx)("h5",{children:this.props.challenge.id.title})}),Object(s.jsx)("p",{children:this.props.challenge.id.goal}),Object(s.jsxs)("p",{children:[this.props.challenge.id.dailyTarget.description," ",this.props.challenge.id.dailyTarget.number," ",this.props.challenge.id.dailyTarget.unit]}),Object(s.jsxs)("p",{children:["Today: ",Object(s.jsx)(_,{index:this.state.challengeDay,user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge,challengeDay:this.state.challengeDay})]}),this.state.activeChallengeDetails&&Object(s.jsx)(L,{challenge:this.props.challenge,user:this.props.user,challengeDay:this.state.challengeDay,calculateChallengeDay:this.props.calculateChallengeDay,streakStatus:this.props.streakStatus}),!this.state.activeChallengeDetails&&Object(s.jsx)("button",{className:"button-light",onClick:this.toggleChallengeDetails,children:"show details"}),this.state.activeChallengeDetails&&Object(s.jsx)("button",{className:"button-light",onClick:this.toggleChallengeDetails,children:"hide details"})]})}}]),a}(n.Component),R=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={user:"",reload:!0},e.calculateChallengeDay=function(e){var t=new Date(e).getTime();return Math.ceil(new Date/864e5)-Math.floor([t]/864e5)},e.streakStatus=function(e,t){for(var a=e[0].toString(),s=1;s<t;s++)e[s]!==e[s-1]&&(a+=" "),a+=e[s];var n=a.split("1").length-1,r=a.split(" ");r=r.filter((function(e){return"1"===e[0]}));var c=0;r.forEach((function(e){var t=e.length;t>c&&(c=t)}));var l={currentStreak:0,longestStreak:c,daysCompleted:n};return 1===e[t-1]&&(l.currentStreak=r[r.length-1].length),l},e.componentDidMount=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;if(this.props.user){var t=this.props.user.challenges.filter((function(e){return"active"===e.status}));return this.props.user.challenges.some((function(e){return"active"===e.status}))?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h2",{children:["Welcome"," ",this.props.user.name?this.props.user.name:this.props.user.username,"!"," "]}),Object(s.jsx)("p",{children:"Your Active Challenges:"}),Object(s.jsx)("div",{className:"dashboard-container",children:t.map((function(t){return Object(s.jsx)(I,{challenge:t,user:e.props.user,calculateChallengeDay:e.calculateChallengeDay,streakStatus:e.streakStatus})}))})]}):Object(s.jsxs)("div",{className:"instruction-container",children:[Object(s.jsxs)("h2",{children:["Welcome"," ",this.props.user.name?this.props.user.name:this.props.user.username,"!"," "]}),Object(s.jsxs)("ol",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)(v.b,{to:"/challenges",children:Object(s.jsx)("button",{children:"BROWSE"})})," ","the existing challenges, or"," ",Object(s.jsx)(v.b,{to:"/challenges/create",children:Object(s.jsx)("button",{children:"CREATE"})})," ","your own. You can 'like' your favorite challenges and come back to them late when you're ready to start a challenge."]}),Object(s.jsxs)("li",{children:[Object(s.jsx)(v.b,{to:"/rewards",children:Object(s.jsx)("button",{children:"BROWSE"})})," ","the existing rewards or"," ",Object(s.jsx)(v.b,{to:"/rewards/create",children:Object(s.jsx)("button",{children:"CREATE"})})," ","your own motivate you. You get rewards when reaching a certain milestones. If you 'like' the ones that you favor, the reward will be generated amongst them."]}),Object(s.jsx)("li",{children:"Let the streak begin!"})]})]})}return Object(s.jsx)("div",{children:"Think about something you always wanted to add to your life and try it for the next 30 days. 30 days just about the right amount of time to add a new habit or substract a habit. If you really want something badly enough, you can do ANYTHING for 30 days"})}}]),a}(n.Component),M=(n.Component,function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(y,{user:this.state.user,setUser:this.setUser}),Object(s.jsxs)(d.d,{children:[Object(s.jsx)(d.b,{exact:!0,path:"/signup",render:function(t){return Object(s.jsx)(f,Object(l.a)({setUser:e.setUser},t))}}),Object(s.jsx)(d.b,{exact:!0,path:"/login",render:function(t){return Object(s.jsx)(x,Object(l.a)({setUser:e.setUser},t))}}),Object(s.jsx)(d.b,{exact:!0,path:"/",render:function(t){return Object(s.jsx)(R,Object(l.a)({setUser:e.setUser,user:e.state.user},t))}}),Object(s.jsx)(d.b,{exact:!0,path:"/challenges",render:function(t){return e.state.user?Object(s.jsx)(k,Object(l.a)(Object(l.a)({},t),{},{user:e.state.user})):Object(s.jsx)(d.a,{to:"/"})}}),Object(s.jsx)(d.b,{exact:!0,path:"/challenges/create",render:function(t){return Object(s.jsx)(F,Object(l.a)(Object(l.a)({setUser:e.setUser},t),{},{user:e.state.user}))}}),Object(s.jsx)(d.b,{exact:!0,path:"/rewards/create",render:function(t){return Object(s.jsx)(m,Object(l.a)({setUser:e.setUser},t))}}),Object(s.jsx)(d.b,{exact:!0,path:"/rewards",render:function(t){return e.state.user?Object(s.jsx)(A,Object(l.a)(Object(l.a)({},t),{},{user:e.state.user,setUser:e.setUser})):Object(s.jsx)(d.a,{to:"/"})}}),Object(s.jsx)(d.b,{exact:!0,path:"/challenges/:id/start",render:function(t){return Object(s.jsx)(T,Object(l.a)(Object(l.a)({setUser:e.setUser},t),{},{user:e.state.user}))}})]})]})}}]),a}(n.Component)),P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,75)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};j.a.get("/auth/loggedin").then((function(e){var t=e.data;c.a.render(Object(s.jsx)(v.a,{children:Object(s.jsx)(M,{user:t})}),document.getElementById("root"))})),P()}},[[74,1,2]]]);
//# sourceMappingURL=main.1a53b2e7.chunk.js.map