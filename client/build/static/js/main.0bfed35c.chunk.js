(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){},20:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(1),n=a(34),c=a.n(n),i=(a(41),a(12)),l=a(2),o=a(3),h=a(5),d=a(4),u=(a(42),a(10)),j=a(8),p=a(6),g=a.n(p),b=function(e,t,a,s,r){return g.a.post("/auth/signup",{username:e,password:t,firstName:a,lastName:s,email:r}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},m=function(e,t){return g.a.post("/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},x=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:"",firstName:"",lastName:"",email:""},e.handleChange=function(t){var a=t.target,s=a.name,r=a.value;e.setState(Object(j.a)({},s,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,s=a.username,r=a.password,n=a.firstName,c=a.lastName,i=a.email;b(s,r,n,c,i).then((function(t){t.message?e.setState({message:t.message,username:"",password:"",firstName:"",lastName:"",email:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"auth-container",children:[Object(s.jsxs)("div",{className:"left",children:[Object(s.jsxs)("div",{className:"header",children:[Object(s.jsx)("h2",{className:"animation a1",children:"Welcome"}),Object(s.jsx)("h4",{className:"animation a2",children:"Sign up to start a 30-day-challenge"})]}),Object(s.jsx)("div",{className:"form",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a3",type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Username"})}),Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a4",type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password"})}),this.state.message&&Object(s.jsx)("p",{children:this.state.message}),Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a3",type:"text",id:"firstName",name:"firstName",value:this.state.firstName,onChange:this.handleChange,placeholder:"First Name"})}),Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a4",type:"text",id:"lastName",name:"lastName",value:this.state.lastName,onChange:this.handleChange,placeholder:"Last Name"})}),Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a3",type:"email",id:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Email"})}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"button-dark animation a6",type:"submit",children:"Sign Up"})]})})]}),Object(s.jsx)("div",{className:"right"})]})}}]),a}(r.Component),f=(a(60),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,s=a.name,r=a.value;e.setState(Object(j.a)({},s,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,s=a.username,r=a.password;m(s,r).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/"))}))},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"auth-container",children:[Object(s.jsxs)("div",{className:"left",children:[Object(s.jsxs)("div",{className:"header",children:[Object(s.jsx)("h2",{className:"animation a1",children:"Welcome Back"}),Object(s.jsx)("h4",{className:"animation a2",children:"Log in to your account using username and password"})]}),Object(s.jsx)("div",{className:"form",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a3",type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Username"})}),Object(s.jsx)("div",{className:"form-field-box",children:Object(s.jsx)("input",{className:"form-field animation a4",type:"password",id:"password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password"})}),this.state.message&&Object(s.jsx)("p",{children:this.state.message}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{className:"button-dark animation a6",type:"submit",children:"Log In"})]})})]}),Object(s.jsx)("div",{className:"right"})]})}}]),a}(r.Component)),O=a(9);a(61);function v(e){var t=function(e){console.log("logout"),g.a.delete("/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)})),console.log("logout successful")};return Object(s.jsxs)("nav",{className:"navbar",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)(O.b,{className:"link",to:"/",children:Object(s.jsx)("img",{src:"./images/logoLight.png",alt:"logo link to homepage",width:"50vw",className:"navbar-logo"})})}),e.user?Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)(O.b,{className:"link",to:"/challenges",children:"Challenges"}),Object(s.jsx)(O.b,{className:"link",to:"/rewards",children:"Rewards"}),Object(s.jsx)(O.b,{className:"link",to:"/profile",children:"Profile"}),Object(s.jsx)(O.b,{className:"link",to:"/login",onClick:function(){return t(e)},children:"Log Out"})]}):Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)(O.b,{className:"link",to:"/signup",children:"Sign Up"}),Object(s.jsx)(O.b,{className:"link",to:"/login",children:"Log In"})]})]})}a(70);var y=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value;e.props.setFilter(a,s)},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"filter-bar",children:[Object(s.jsx)("div",{className:"filter-item search-filter",children:Object(s.jsx)("input",{type:"text",placeholder:"Search...",name:"searchFilter",onChange:this.handleChange})}),Object(s.jsx)("div",{className:"filter-item dropdown-filter",children:Object(s.jsxs)("select",{name:"categoryFilter",id:"categoryFilter",onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"",children:"Category"}),this.props.categories.map((function(e){return Object(s.jsx)("option",{children:e})}))]})}),Object(s.jsx)("div",{className:"filter-item checkbox-filter",children:Object(s.jsxs)("label",{htmlFor:"favoritesFilter",children:["My Favorites",Object(s.jsx)("input",{type:"checkbox",id:"favoritesFilter",name:"favoritesFilter",onChange:this.handleChange}),Object(s.jsx)("span",{className:"checkmark"})]})})]})}}]),a}(r.Component),C=a(7),w=a.n(C),N=a(13),k=(a(19),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={users:[],favorite:""},e.getUsers=function(){g.a.get("/api/users").then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))},e.toggleFavorite=Object(N.a)(w.a.mark((function t(){var a,s,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=!e.state.favorite,e.setState({favorite:a}),s=e.props.challenge._id,t.next=6,g.a.put("/api/users/".concat(s,"/challengesfavorite"),{favorite:a});case 6:r=t.sent,e.props.setUser(r.data),e.props.getChallenges(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.initialSetUp=function(){var t=e.props.user.challenges.some((function(t){return t.id._id===e.props.challenge._id&&"favorite"===t.status}));e.setState({favorite:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.initialSetUp(),this.getUsers()}},{key:"componentDidUpdate",value:function(e,t){e.filtered.length!==this.props.filtered.length&&this.initialSetUp()}},{key:"render",value:function(){var e=this;return this.state.users.forEach((function(t){t.challenges.forEach((function(t){t.id!==e.props.challenge._id||"completed"!==t.status&&"active"!==t.status&&"withdrawn"!==t.status||0}))})),Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("div",{className:"card-header",children:[Object(s.jsx)("span",{children:this.props.challenge.category}),Object(s.jsx)("img",{src:this.state.favorite?"./images/favorite1.png":"./images/unfavorite1.png",onClick:this.toggleFavorite,alt:"favorite"})]}),Object(s.jsx)("h3",{children:this.props.challenge.title}),Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:this.props.challenge.goal&&this.props.challenge.goal}),Object(s.jsx)(O.b,{to:"/challenges/".concat(this.props.challenge._id,"/start"),children:Object(s.jsx)("button",{className:"button-light",children:"Start"})})]},this.props.challenge._id)}}]),a}(r.Component)),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={challenges:[],searchFilter:"",categoryFilter:"",favoritesFilter:!1},e.getChallenges=function(){g.a.get("/api/challenges").then((function(t){e.setState({challenges:t.data})})).catch((function(e){return console.log(e)}))},e.setFilter=function(t,a){e.setState(Object(j.a)({},t,a))},e.filter=function(){var t=e.props.user.challenges.filter((function(e){return"favorite"===e.status})).map((function(e){return e.id._id})),a=e.props.user.challenges.filter((function(e){return"active"===e.status||"completed"===e.status||"withdrawn"===e.status})).map((function(e){return e.id._id}));return e.state.favoritesFilter?e.state.challenges.filter((function(e){return t.includes(e._id)})):e.state.challenges.filter((function(t){return"".concat(t.title).concat(t.goal).toLowerCase().includes(e.state.searchFilter.toLowerCase())&&(e.state.categoryFilter===t.category||!e.state.categoryFilter)&&!a.includes(t._id)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getChallenges()}},{key:"render",value:function(){var e=this,t=this.filter(),a=this.state.challenges.map((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"tool-bar",children:[Object(s.jsx)(y,{categories:a,setFilter:this.setFilter}),Object(s.jsx)(O.b,{to:"/challenges/create",children:Object(s.jsx)("img",{src:"/images/plus.png"})})]}),Object(s.jsx)("div",{className:"challenges-container",children:t.map((function(a){return Object(s.jsx)(k,{challenge:a,user:e.props.user,getChallenges:e.getChallenges,filtered:t,setUser:e.props.setUser})}))})]})}}]),a}(r.Component),D=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={title:"",goal:"",dailyTargetDescription:"",category:"",user:e.props.user,challengeID:""},e.handleChange=function(t){var a=t.target.name,s=t.target.value;e.setState(Object(j.a)({},a,s))},e.handleSubmitLater=function(){var t=Object(N.a)(w.a.mark((function t(a){var s,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=e.state.user._id,t.prev=2,t.next=5,g.a.post("/api/challenges",{title:e.state.title,goal:e.state.goal,dailyTarget:{description:e.state.dailyTargetDescription},category:e.state.category});case 5:return r=t.sent,e.props.user.challenges.unshift({id:r.data._id,status:"favorite",tracker:[]}),e.setState({user:e.props.user}),t.next=11,g.a.put("/api/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 11:t.sent,e.props.history.push("/challenges"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmitStart=function(){var t=Object(N.a)(w.a.mark((function t(a){var s,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=e.state.user._id,t.prev=2,t.next=5,g.a.post("/api/challenges",{title:e.state.title,goal:e.state.goal,dailyTarget:{description:e.state.dailyTargetDescription},category:e.state.category});case 5:return r=t.sent,e.props.user.challenges.unshift({id:r.data._id,status:"active",tracker:[]}),e.setState({user:e.props.user}),t.next=11,g.a.put("/api/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 11:t.sent,e.props.history.push("/challenges/".concat(r.data._id,"/start")),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"render",value:function(){return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"create-challenge-page",children:Object(s.jsxs)("form",{className:"create-challenge-form",id:"create-challenge-form",children:[Object(s.jsx)("h1",{children:"Create a Challenge"}),Object(s.jsxs)("div",{className:"create-challenge-form-fields",children:[Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"title",name:"title",value:this.state.title,onChange:this.handleChange,placeholder:"Example Title: Get More Sleep",required:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"goal",children:"Goal:"}),Object(s.jsx)("br",{}),Object(s.jsx)("textarea",{type:"text",id:"goal",name:"goal",value:this.state.goal,onChange:this.handleChange,placeholder:"Example Goal: Improve my sleep habits so I feel more rested and alert throughout the day",required:!0,textarea:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"dailyTargetDescription",children:"Daily Action:"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"dailyTargetDescription",name:"dailyTargetDescription",value:this.state.dailyTargetDescription,onChange:this.handleChange,placeholder:"Example Action: Get 8 hours of sleep each night",required:!0})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"category",children:"Category \xa0 \xa0"}),Object(s.jsxs)("select",{name:"category",id:"category",value:this.state.category,onChange:this.handleChange,required:!0,children:[Object(s.jsx)("option",{value:"health",children:"Health"}),Object(s.jsx)("option",{value:"fitness",children:"Fitness"}),Object(s.jsx)("option",{value:"career",children:"Career"}),Object(s.jsx)("option",{value:"productivity",children:"Productivity"}),Object(s.jsx)("option",{value:"finance",children:"Finance"}),Object(s.jsx)("option",{value:"other",children:"Other"})]})]})]}),Object(s.jsxs)("div",{className:"create-challenge-buttons",children:[Object(s.jsx)("button",{className:"button-light",form:"create-challenge-form",onClick:this.handleSubmitLater,children:"Cancel"}),Object(s.jsx)("button",{className:"button-light",form:"create-challenge-form",onClick:this.handleSubmitLater,children:"Save for later"}),Object(s.jsx)("button",{className:"button-dark",form:"create-challenge-form",onClick:this.handleSubmitStart,children:"Start now!"})]})]})})})}}]),a}(r.Component),F=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={title:"",goal:"",dailyTargetDescription:"",dailyTargetNumber:"",dailyTargetUnit:"",prize:"",user:""},e.handleChange=function(t){var a=t.target.name,s=t.target.value;e.setState(Object(j.a)({},a,s))},e.getChallenges=function(){var t=e.props.match.params.id;g.a.get("/api/challenges/".concat(t)).then((function(t){e.setState({title:t.data.title,goal:t.data.goal,dailyTargetDescription:t.data.dailyTarget.description,dailyTargetNumber:t.data.dailyTarget.number,dailyTargetUnit:t.data.dailyTarget.unit})})).catch((function(e){console.log("error",e)}))},e.componentDidMount=function(){e.getChallenges(),e.setState({user:e.props.user})},e.handleSubmit=function(){var t=Object(N.a)(w.a.mark((function t(a){var s,r,n,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s=e.state.user._id,r=e.props.match.params.id,t.prev=3,n=e.props.user,n.challenges.some((function(e){return e.id._id===r}))?n=n.challenges.map((function(t){return t.id._id===r&&(t.status="active",t.startDate=new Date,t.tracker=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.grandPrize=e.state.prize),t})):n.challenges.unshift({id:e.props.match.params.id,status:"active",tracker:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],startDate:new Date,grandPrize:e.state.prize}),e.setState({user:e.props.user}),t.next=10,g.a.put("/api/users/".concat(s),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 10:c=t.sent,console.log("updatedUser.data",c.data),e.props.setUser(c.data),e.props.history.push("/"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"start-challenge-page",children:Object(s.jsxs)("div",{className:"start-challenge-page-content",children:[Object(s.jsx)("h1",{children:"Congratulations!"}),Object(s.jsx)("p",{children:"Here is the information for the CHALLENGE you're starting TODAY!"}),Object(s.jsx)("h3",{children:this.state.title}),Object(s.jsxs)("p",{children:["Goal: ",this.state.goal]}),Object(s.jsxs)("p",{children:["Daily target: ",this.state.dailyTargetDescription," ",this.state.dailyTargetNumber," ",this.state.dailyTargetUnit]}),Object(s.jsx)("h2",{children:"Pick your GRAND PRIZE for completing it"}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("label",{htmlFor:"prize",children:"Prize"}),Object(s.jsx)("input",{type:"text",id:"prize",name:"prize",value:this.state.prize,onChange:this.handleChange,required:!0}),Object(s.jsx)("button",{className:"button-dark",type:"submit",onSubmit:this.handleSubmit,children:"Let's do it!"})]})]})})}}]),a}(r.Component),U=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={favorite:""},e.toggleFavorite=Object(N.a)(w.a.mark((function t(){var a,s,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=!e.state.favorite,e.setState({favorite:a}),s=e.props.reward._id,t.next=6,g.a.put("/api/users/".concat(s,"/rewardsfavorite"),{favorite:a});case 6:r=t.sent,console.log("udpatedUser",r.data),e.props.setUser(r.data),console.log("user after set new user",e.props.user),e.props.getRewards(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])}))),e.initialSetUp=function(){var t=e.props.user.rewards.some((function(t){return t._id===e.props.reward._id}));e.setState({favorite:t})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.initialSetUp()}},{key:"componentDidUpdate",value:function(e,t){e.filtered.length!==this.props.filtered.length&&this.initialSetUp()}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"card",children:[Object(s.jsxs)("div",{className:"card-header",children:[Object(s.jsx)("span",{children:this.props.reward.category}),Object(s.jsx)("img",{src:this.state.favorite?"./images/favorite1.png":"./images/unfavorite1.png",onClick:this.toggleFavorite,alt:"favorite"})]}),Object(s.jsx)("h3",{children:this.props.reward.name}),this.props.reward.description&&Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:this.props.reward.description&&this.props.reward.description}),this.props.reward.url&&Object(s.jsx)("a",{href:"{this.props.reward.url}",children:"Link"})]},this.props.reward._id)}}]),a}(r.Component),T=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).getRewards=function(){g.a.get("/api/rewards").then((function(e){s.setState({rewards:e.data})})).catch((function(e){return console.log(e)}))},s.handleChange=function(e){var t=e.target.name,a=e.target.value;s.setState(Object(j.a)({},t,a))},s.resetState=function(){s.setState(s.initialState)},s.handleSubmit=function(e){e.preventDefault(),g.a.post("/api/rewards",{name:s.state.name,description:s.state.description,category:s.state.category,url:s.state.url}).then((function(e){s.resetState(),s.getRewards(),s.props.history.push("/rewards")})).catch((function(e){return console.log(e)}))},s.toggleAddReward=function(){s.setState((function(e){return{showForm:!e.showForm}}))},s.state={name:"",description:"",category:"entertainment",url:"",showForm:!0},s.initialState=s.state,s}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{children:this.state.showForm&&Object(s.jsx)("div",{className:"create-challenge-page",children:Object(s.jsxs)("form",{className:"create-challenge-form",onSubmit:this.handleSubmit,children:[Object(s.jsxs)("div",{className:"create-challenge-header",children:[Object(s.jsx)("h1",{onClick:this.toggleAddReward,children:"Create a new reward"}),Object(s.jsx)("p",{children:"Need some ideas for incentives to achieving your goals?"}),Object(s.jsxs)("p",{children:["Check out what ",Object(s.jsx)("a",{href:"#",children:"other users have added"})," or see if there is something you like on",Object(s.jsx)("a",{href:"https://www.developgoodhabits.com/reward-yourself/",target:"_blank",children:" this list "}),"or ",Object(s.jsx)("a",{href:"https://organisemyhouse.com/reward-yourself/",target:"_blank",children:"this one"}),"."]})]}),Object(s.jsx)("div",{className:"create-challenge-form-fields",children:Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"name",children:"Name"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"name",name:"name",value:this.state.name,placeholder:"Give your reward a name",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"description",children:"Description"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"description",name:"description",value:this.state.description,placeholder:"Add a more detailed description if you need one",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"url",children:"Link"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"url",name:"url",value:this.state.url,placeholder:"You can add a link to an internet page here",onChange:this.handleChange})]}),Object(s.jsxs)("div",{className:"create-challenge-form-item",children:[Object(s.jsx)("label",{htmlFor:"category",children:"Category  \xa0 \xa0"}),Object(s.jsxs)("select",{id:"category",name:"category",value:this.state.category,placeholder:"Select category",onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"entertainment",children:"Art and Entertainment"}),Object(s.jsx)("option",{value:"food",children:"Food"}),Object(s.jsx)("option",{value:"self-care",children:"Self-care"}),Object(s.jsx)("option",{value:"shopping",children:"Shopping"}),Object(s.jsx)("option",{value:"travel and outdoors",children:"Travel and Outdoors"}),Object(s.jsx)("option",{value:"Other",children:"Other"})]})]})]})}),Object(s.jsxs)("div",{className:"create-challenge-buttons",children:[Object(s.jsx)("button",{className:"button-light",type:"cancel",onClick:this.resetState,children:"Cancel"}),Object(s.jsx)("button",{className:"button-dark",type:"submit",children:"Save to favorites"})]})]})})})}}]),a}(r.Component),A=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={rewards:[],searchFilter:"",categoryFilter:"",favoritesFilter:!1},e.getRewards=function(){g.a.get("/api/rewards").then((function(t){e.setState({rewards:t.data})})).catch((function(e){return console.log(e)}))},e.setFilter=function(t,a){e.setState(Object(j.a)({},t,a))},e.filter=function(){var t=e.props.user.rewards.map((function(e){return e._id}));return e.state.favoritesFilter?(console.log("here"),console.log("0",e.state.rewards),e.state.rewards.filter((function(e){return console.log("FAV",t,"ID",e._id,"?",t.includes(e._id)),t.includes(e._id)}))):(console.log("1",e.state.rewards),e.state.rewards.filter((function(t){return"".concat(t.name).concat(t.description).toLowerCase().includes(e.state.searchFilter.toLowerCase())&&(e.state.categoryFilter===t.category||!e.state.categoryFilter)})))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getRewards()}},{key:"render",value:function(){var e=this,t=this.filter();console.log("filtered",t),console.log("2",this.state.rewards);var a=this.state.rewards.map((function(e){return e.category})).filter((function(e,t,a){return a.indexOf(e)===t}));return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"tool-bar",children:[Object(s.jsx)(y,{categories:a,setFilter:this.setFilter}),Object(s.jsx)(O.b,{to:"/rewards/create",children:Object(s.jsx)("img",{src:"/images/plus.png"})})]}),Object(s.jsx)("div",{className:"challenges-container",children:t.map((function(a){return Object(s.jsx)("div",{children:Object(s.jsx)(U,{reward:a,user:e.props.user,filtered:t,getRewards:e.getRewards,setUser:e.props.setUser})},a._id)}))})]})}}]),a}(r.Component),_=(a(20),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.challenge.tracker,t=this.props.index,a=Number.parseInt(t)+1;return Object(s.jsx)("div",{className:(2===e["".concat(t)]?"failed":1===e["".concat(t)]&&"completed")||0===e["".concat(t)]&&"not-attempted",onClick:this.props.handleChange,id:t,children:a})}}]),a}(r.Component)),E=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={user:""},e.initialSetupTracker=function(){for(var t=e.props.challenge.tracker,a=0;a<t.length;a++){var s=a.toString(),r=t[a];e.setState(Object(j.a)({},s,r))}},e.handleChange=function(){var t=Object(N.a)(w.a.mark((function t(a){var s,r,n,c,i,l,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a.target,r=s.checked,n=s.id,c=e.props.challenge.tracker,i=s.id,!(a.target.id<e.props.challengeDay)){t.next=16;break}return 0===c[i]||1===c[i]?c[i]++:c[i]--,e.setState(Object(j.a)({},n,r)),l=e.state.user._id,t.next=12,g.a.put("/api/users/".concat(l),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 12:t.sent,e.props.refreshActiveChallengeDetails(),o=e.props.streakStatus(e.props.challenge.tracker,e.props.challengeDay),e.props.notifier(o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=function(){e.setState({user:e.props.user})},e}return Object(o.a)(a,[{key:"render",value:function(){this.props.challenge.tracker;return Object(s.jsxs)("div",{className:"full-tracker",children:[Object(s.jsx)("p",{children:"click on a day to update the tracker"}),Object(s.jsxs)("div",{className:"full-tracker-grid",children:[Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"0",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"1",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"2",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"3",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"4",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"5",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"6",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"7",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"8",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"9",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"10",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"11",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"12",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"13",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"14",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"15",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"16",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"17",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"18",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"19",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"20",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"21",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"22",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"23",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"24",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]}),Object(s.jsxs)("div",{className:"set-of-five-checkboxes",children:[Object(s.jsx)(_,{index:"25",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"26",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"27",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"28",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge}),Object(s.jsx)(_,{index:"29",user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge})]})]})]})}}]),a}(r.Component),L=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={refreshToggle:!0},e.refreshActiveChallengeDetails=function(){e.setState({refreshToggle:!e.state.refreshToggle})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.streakStatus(this.props.challenge.tracker,this.props.challengeDay),t=e.currentStreak,a=e.longestStreak,r=30-this.props.challengeDay;return Object(s.jsxs)("div",{className:"activeContainer",children:[Object(s.jsxs)("p",{className:"progress",children:["Progress day ",this.props.challengeDay]}),Object(s.jsxs)("div",{className:"active-challenge-details-user-info-container",children:[Object(s.jsx)(E,{challenge:this.props.challenge,user:this.props.user,challengeDay:this.props.challengeDay,calculateChallengeDay:this.props.calculateChallengeDay,refreshActiveChallengeDetails:this.refreshActiveChallengeDetails,notifier:this.props.notifier,streakStatus:this.props.streakStatus},this.props.challenge.id),Object(s.jsxs)("div",{className:"active-challenge-details-user-info-text",children:[Object(s.jsxs)("div",{className:"days-left",children:[" ",Object(s.jsx)("h1",{children:r})," days to go!"," "]}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Current streak: ",t]}),Object(s.jsxs)("p",{children:["Longest streak: ",a]}),Object(s.jsx)("div",{className:"active-challenge-details-prize",children:Object(s.jsxs)("p",{children:["EYES ON THE PRIZE: ",Object(s.jsx)("br",{}),this.props.challenge.grandPrize]})})]})]})]})]})}}]),a}(r.Component),R=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={challengeDay:0,activeChallengeDetails:!1,user:""},e.toggleChallengeDetails=function(){e.setState((function(e){return{activeChallengeDetails:!e.activeChallengeDetails}}))},e.selectReward=function(){var t=e.props.user.rewards;return t[Math.floor(Math.random()*t.length)]},e.notifier=function(){var t=e.state.challengeDay,a=e.props.challenge.tracker,s=e.props.streakStatus(e.props.challenge.tracker,t);return 1===a[t-1]&&7===s.currentStreak&&!1===e.props.challenge.subGoals7DayStreak?(console.log("7 day streak"),e.props.challenge.subGoals7DayStreak=!0,[7,e.selectReward()]):1===a[t-1]&&t>=15&&!1===e.props.challenge.notification15Days?(console.log("half way"),e.props.challenge.notification15Days=!0,[7]):1===a[t-1]&&21===s.currentStreak&&!1===e.props.challenge.subGoals21DayStreak?(console.log("21-day streak"),e.props.challenge.subGoals21DayStreak=!0,[21,e.selectReward()]):1===a[t-1]&&28===t&&!1===e.props.challenge.notification28Days?(console.log("nearly there"),e.props.challenge.notification15Days=!0,[28]):t>=30&&!1===e.props.challenge.notificationComplete?(e.props.challenge.notificationComplete=!0,30===s.daysCompleted?["success"]:["notQuite"]):void 0},e.withdrawFromChallenge=Object(N.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.put("/api/users/".concat(e.props.challenge.id._id,"/withdraw"));case 3:a=t.sent,e.props.setUser(a.data),console.log("updated user data",a.data),e.props.history.push("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),e.handleChange=function(){var t=Object(N.a)(w.a.mark((function t(a){var s,r,n,c,i,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=a.target,r=s.checked,n=s.id,c=e.props.challenge.tracker,console.log("challenge tracker from one button",c),i=s.id,!(a.target.id<e.state.challengeDay)){t.next=14;break}return 0===c[i]||1===c[i]?c[i]++:c[i]--,e.setState(Object(j.a)({},n,r)),l=e.state.user._id,t.next=13,g.a.put("/api/users/".concat(l),{challenges:e.state.user.challenges,rewards:e.state.user.rewards});case 13:t.sent;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=Object(N.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a=e.props.calculateChallengeDay(e.props.challenge.startDate),e.setState({challengeDay:a,user:e.props.user})}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.challengeDay-1;return Object(s.jsxs)("div",{className:"active-preview",children:[Object(s.jsxs)("div",{className:"active-preview-no-button",children:[Object(s.jsxs)("div",{className:"preview-challenge-info",children:[Object(s.jsx)("h5",{children:this.props.challenge.id.title}),Object(s.jsx)("p",{children:this.props.challenge.id.goal}),Object(s.jsxs)("p",{children:[this.props.challenge.id.dailyTarget.description,this.props.challenge.id.dailyTarget.number,this.props.challenge.id.dailyTarget.unit]})]}),Object(s.jsxs)("div",{className:"awesome-button",children:[Object(s.jsxs)("p",{children:["Click below to ",Object(s.jsx)("br",{})," log today:"," "]}),Object(s.jsx)(_,{index:e,user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge,challengeDay:this.state.challengeDay})]})]}),this.state.activeChallengeDetails&&Object(s.jsx)(L,{challenge:this.props.challenge,user:this.props.user,challengeDay:this.state.challengeDay,calculateChallengeDay:this.props.calculateChallengeDay,streakStatus:this.props.streakStatus,notifier:this.notifier}),!this.state.activeChallengeDetails&&Object(s.jsx)("button",{className:"button-dark",onClick:this.toggleChallengeDetails,children:"show details"}),this.state.activeChallengeDetails&&Object(s.jsx)("button",{className:"button-light",onClick:this.withdrawFromChallenge,children:"i give up, i'm a bit fat looser"}),this.state.activeChallengeDetails&&Object(s.jsx)("button",{className:"button-dark",onClick:this.toggleChallengeDetails,children:"hide details"})]})}}]),a}(r.Component);function P(){return Object(s.jsxs)("div",{className:"welcome-container",children:[Object(s.jsxs)("div",{className:"scroll-container one",children:[Object(s.jsx)("h1",{children:"30-DAY-CHALLENGE"}),Object(s.jsx)("h2",{children:"Think about something you always wanted to add to your life and try it for the next 30 days..."}),Object(s.jsx)("h2",{children:"30 days just about the right amount of time to add a new habit or substract a habit."}),Object(s.jsx)("h2",{children:Object(s.jsx)("strong",{children:"So... what are you waiting for?"})})]}),Object(s.jsxs)("div",{className:"scroll-container two",children:[Object(s.jsx)("h1",{children:"Why do a 30-day challenge?"}),Object(s.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/UNP03fDSj1U",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})]}),Object(s.jsxs)("div",{className:"scroll-container light three",children:[Object(s.jsx)("h1",{children:"How to get started?"}),Object(s.jsxs)("div",{className:"how-container",children:[Object(s.jsxs)("div",{className:"how-box step-one",children:[Object(s.jsx)("img",{src:"../../images/home2.png",alt:"challenges"}),Object(s.jsxs)("div",{className:"how-box-text",children:[Object(s.jsx)("h3",{children:"Challenges"}),Object(s.jsx)("p",{children:"30 Day Challenges are a great way of implementing new habits in life, trying new things and undertaking new challenges without putting too much pressure on yourself. Pick a challenge for yourself. If you need inspiration, browse ones that others added or create your own. "})]})]}),Object(s.jsxs)("div",{className:"how-box step-two",children:[Object(s.jsxs)("div",{className:"how-box-text",children:[Object(s.jsx)("h3",{children:"Rewards"}),Object(s.jsx)("p",{children:"It\u2019s important to stay motivated, and a great way to do that is through a reward system. You'll get an opportunity to earn rewards, say eating your favorite food, by accomplishing a milestone and get a grand prize form reaching the goal goal. This way you find starting to work on your goals much Easier. Again, you can add one of the rewards from existing collections to your favorites or create your own."})]}),Object(s.jsx)("img",{src:"",alt:"rewards"})]}),Object(s.jsxs)("div",{className:"how-box step-three",children:[Object(s.jsx)("img",{src:"",alt:"progress"}),Object(s.jsxs)("div",{className:"how-box-text",children:[Object(s.jsx)("h3",{children:"Progress"}),Object(s.jsx)("p",{children:"Track your progress. Checking each day on our virtual calendar encourages you to complete your desired task every single day. The more you look at an growing streak, the more compulsion you feel to get over any initial resistance and motivate yourself to keep going. "})]})]})]})]}),Object(s.jsx)("div",{className:"scroll-container dark four",children:Object(s.jsxs)("div",{className:"tips",children:[Object(s.jsx)("h1",{children:"Tips and tricks "}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:"Focus on 1 habit at the time"}),Object(s.jsx)("li",{children:"Commit to a minimum of 30 days"}),Object(s.jsx)("li",{children:"Anchor a new habit to an established routine"}),Object(s.jsx)("li",{children:"Take baby steps - micro commitments"}),Object(s.jsx)("li",{children:"Don\u2019t break the chain. "}),Object(s.jsx)("li",{children:"Plan for obstacles and challenges"}),Object(s.jsx)("li",{children:"Create accountability for your work habit"}),Object(s.jsx)("li",{children:"Reward important milestones"}),Object(s.jsx)("li",{children:"Build a new identity"})]})]})})]})}function G(e){return Object(s.jsxs)("div",{className:"instruction-container",children:[Object(s.jsxs)("h2",{children:["Welcome"," ",e.user.firstName?e.user.firstName:e.user.username," !"]}),Object(s.jsxs)("h4",{children:["You don't have any active challenges at the moment.",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"Browse challenges and rewards to save your favorite ones.",Object(s.jsx)("br",{}),"You can also create your own! They will be automatically saved to your favorites.",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"When you feel ready go to challenges, pick one and let the adventure begin!"]}),Object(s.jsxs)("div",{className:"button-container",children:[Object(s.jsxs)("div",{className:"one-button",children:[Object(s.jsx)("h5",{children:"Challenges"}),Object(s.jsx)(O.b,{to:"/challenges",children:Object(s.jsx)("button",{className:"bottom-dark",children:"BROWSE"})}),Object(s.jsx)(O.b,{to:"/challenges/create",children:Object(s.jsx)("button",{className:"bottom-light",children:"CREATE"})})]}),Object(s.jsxs)("div",{className:"one-button",children:[Object(s.jsx)("h5",{children:"Rewards"}),Object(s.jsx)(O.b,{to:"/rewards",children:Object(s.jsx)("button",{className:"bottom-dark",children:"BROWSE"})}),Object(s.jsx)(O.b,{to:"/rewards/create",children:Object(s.jsx)("button",{className:"bottom-light",children:"CREATE"})})]})]})]})}var I=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).calculateChallengeDay=function(e){var t=new Date(e).getTime();return Math.ceil(new Date/864e5)-Math.floor([t]/864e5)},e.streakStatus=function(e,t){for(var a=e[0].toString(),s=1;s<t;s++)e[s]!==e[s-1]&&(a+=" "),a+=e[s];var r=a.split("1").length-1,n=a.split(" ");n=n.filter((function(e){return"1"===e[0]}));var c=0;n.forEach((function(e){var t=e.length;t>c&&(c=t)}));var i={currentStreak:0,longestStreak:c,daysCompleted:r};return 1===e[t-1]&&(i.currentStreak=n[n.length-1].length),i},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;if(this.props.user){var t=this.props.user.challenges.filter((function(e){return"active"===e.status}));return this.props.user.challenges.some((function(e){return"active"===e.status}))?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("h2",{children:["Welcome"," ",this.props.user.firstName?this.props.user.firstName:this.props.user.username,"!"]}),Object(s.jsx)("p",{children:"Your Active Challenges:"}),Object(s.jsx)("div",{className:"dashboard-container",children:t.map((function(t){return Object(s.jsx)(R,Object(i.a)({challenge:t,user:e.props.user,calculateChallengeDay:e.calculateChallengeDay,streakStatus:e.streakStatus,setUser:e.props.setUser},e.props))}))})]}):Object(s.jsx)(G,{user:this.props.user})}return Object(s.jsx)(P,{})}}]),a}(r.Component),z=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={challenges:[],statusFilter:"",ownerFilter:!1},e.getChallenges=function(){g.a.get("/api/challenges").then((function(t){console.log("HERE",t.data),e.setState({challenges:t.data})})).catch((function(e){return console.log(e)}))},e.filter=function(){return e.state.ownerFilter?e.state.challenges.filter((function(t){return console.log("CHALLENGE",t),t.owner===e.props.user._id})):e.props.user.challenges.filter((function(t){return"active"!==t.status&&"favorite"!==t.status&&(e.state.statusFilter===t.status||!e.state.statusFilter)}))},e.handleChange=function(t){var a=t.target.name,s="checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(j.a)({},a,s))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getChallenges()}},{key:"render",value:function(){var e=this,t=this.filter();return console.log("status",this.state.statusFilter),console.log("challenges",this.state.challenges),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"profile-basic-info",children:[Object(s.jsx)("h2",{children:"Profile"}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Username:"})," ",this.props.user.username]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Name:"})," ",this.props.user.firstName," ",this.props.user.lastName]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Email:"})," ",this.props.user.email]})]}),Object(s.jsxs)("div",{className:"profile-challenges-history",children:[Object(s.jsx)("h2",{children:"Challenge History"}),Object(s.jsxs)("div",{className:"tool-box",children:[Object(s.jsx)("div",{className:"statusFilter",children:Object(s.jsxs)("select",{name:"statusFilter",id:"statusFilter",onChange:this.handleChange,children:[Object(s.jsx)("option",{value:"",children:"Show All"}),Object(s.jsx)("option",{value:"completed",children:"Completed"}),Object(s.jsx)("option",{value:"withdrawn",children:"Withdrawn"})]})}),Object(s.jsxs)("div",{className:"filter",children:[Object(s.jsx)("input",{type:"checkbox",id:"ownerFilter",name:"ownerFilter",onChange:this.handleChange}),Object(s.jsx)("label",{htmlFor:"ownerFilter",children:"Created by me"})]})]})]}),Object(s.jsx)("div",{className:"challenges-container",children:t.map((function(t){return e.state.ownerFilter?Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsx)("p",{children:t.category})}),Object(s.jsx)("h3",{children:t.title}),Object(s.jsx)("hr",{}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Goal:"})," ",t.goal]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Daily Target:"})," ",t.dailyTarget.description," ",t.dailyTarget.number," ",t.dailyTarget.unit]})]},t._id):Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsx)("p",{children:t.id.category})}),Object(s.jsx)("h3",{children:t.id.title}),Object(s.jsx)("hr",{}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Status:"})," ",t.status]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Goal:"})," ",t.id.goal]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Daily Target:"})," ",t.id.dailyTarget.description," ",t.id.dailyTarget.number," ",t.id.dailyTarget.unit]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Start date:"})," ",t.startDate&&t.startDate]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Grand Prize:"})," ",t.grandPrize]})]},t._id)}))})]})}}]),a}(r.Component),M=(r.Component,r.Component,function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.user,modalIsActive:!0,modalEvent:7,modalReward:""},e.setUser=function(t){e.setState({user:t})},e.modalToggle=function(){e.setState({modalIsActive:!e.state.modalIsActive})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(v,{user:this.state.user,setUser:this.setUser}),Object(s.jsxs)(u.d,{children:[Object(s.jsx)(u.b,{exact:!0,path:"/signup",render:function(t){return Object(s.jsx)(x,Object(i.a)({setUser:e.setUser},t))}}),Object(s.jsx)(u.b,{exact:!0,path:"/login",render:function(t){return Object(s.jsx)(f,Object(i.a)({setUser:e.setUser},t))}}),Object(s.jsx)(u.b,{exact:!0,path:"/",render:function(t){return Object(s.jsx)(I,Object(i.a)({setUser:e.setUser,user:e.state.user},t))}}),Object(s.jsx)(u.b,{exact:!0,path:"/challenges",render:function(t){return Object(s.jsx)(S,Object(i.a)({user:e.state.user,setUser:e.setUser},t))}}),Object(s.jsx)(u.b,{exact:!0,path:"/challenges/create",render:function(t){return Object(s.jsx)(D,Object(i.a)(Object(i.a)({setUser:e.setUser},t),{},{user:e.state.user}))}}),Object(s.jsx)(u.b,{exact:!0,path:"/rewards/create",render:function(t){return Object(s.jsx)(T,Object(i.a)({setUser:e.setUser},t))}}),Object(s.jsx)(u.b,{exact:!0,path:"/rewards",render:function(t){return e.state.user?Object(s.jsx)(A,Object(i.a)(Object(i.a)({},t),{},{user:e.state.user,setUser:e.setUser})):Object(s.jsx)(u.a,{to:"/"})}}),Object(s.jsx)(u.b,{exact:!0,path:"/challenges/:id/start",render:function(t){return Object(s.jsx)(F,Object(i.a)(Object(i.a)({setUser:e.setUser},t),{},{user:e.state.user}))}}),Object(s.jsx)(u.b,{exact:!0,path:"/profile",render:function(t){return Object(s.jsx)(z,Object(i.a)(Object(i.a)({setUser:e.setUser},t),{},{user:e.state.user}))}})]})]})}}]),a}(r.Component)),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,73)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};g.a.get("/auth/loggedin").then((function(e){var t=e.data;c.a.render(Object(s.jsx)(O.a,{children:Object(s.jsx)(M,{user:t})}),document.getElementById("root"))})),H()}},[[72,1,2]]]);
//# sourceMappingURL=main.0bfed35c.chunk.js.map