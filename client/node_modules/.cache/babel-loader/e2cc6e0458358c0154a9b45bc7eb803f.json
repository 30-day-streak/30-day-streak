{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import Filter from'../filter/Filter.js';import OneChallenge from'./OneChallenge';import'./Challenges.css';var Challenges=/*#__PURE__*/function(_Component){_inherits(Challenges,_Component);var _super=_createSuper(Challenges);function Challenges(){var _this;_classCallCheck(this,Challenges);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={challenges:[],//filter\nsearchFilter:'',categoryFilter:'',favoritesFilter:false};_this.getData=function(){axios.get('/api/challenges').then(function(response){_this.setState({challenges:response.data});}).catch(function(err){return console.log(err);});};_this.setFilter=function(name,value){_this.setState(_defineProperty({},name,value));};_this.filter=function(){var favoriteIds=_this.props.user.challenges.filter(function(challenge){return challenge.status==='favorite';}).map(function(challenge){return challenge.id._id;});var excludedIds=_this.props.user.challenges.filter(function(challenge){return challenge.status==='active'||challenge.status==='completed'||challenge.status==='withdrawn';}).map(function(challenge){return challenge.id._id;});if(_this.state.favoritesFilter){return _this.state.challenges.filter(function(challenge){return favoriteIds.includes(challenge._id);});}else{return _this.state.challenges.filter(function(challenge){// search bar filter\nreturn\"\".concat(challenge.title).concat(challenge.goal).toLowerCase().includes(_this.state.searchFilter.toLowerCase())&&(// categories filter\n_this.state.categoryFilter===challenge.category||!_this.state.categoryFilter)&&// exclude active, completed and withdrawn challenges\n!excludedIds.includes(challenge._id);});}};return _this;}_createClass(Challenges,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){var _this2=this;var filtered=this.filter();var categories=this.state.challenges.map(function(challenge){return challenge.category;}).filter(function(category,index,array){return array.indexOf(category)===index;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-bar\",children:[/*#__PURE__*/_jsx(Filter// challenges={ this.state.challenges }\n// user={ this.props.user}\n,{categories:categories,setFilter:this.setFilter}),/*#__PURE__*/_jsx(Link,{to:\"/challenges/create\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/plus.png\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"challenges-container\",children:filtered.map(function(challenge){return/*#__PURE__*/_jsx(OneChallenge,{challenge:challenge,user:_this2.props.user,getData:_this2.getData,filtered:filtered});})})]});}}]);return Challenges;}(Component);export{Challenges as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/Challenges.js"],"names":["React","Component","axios","Link","Filter","OneChallenge","Challenges","state","challenges","searchFilter","categoryFilter","favoritesFilter","getData","get","then","response","setState","data","catch","err","console","log","setFilter","name","value","filter","favoriteIds","props","user","challenge","status","map","id","_id","excludedIds","includes","title","goal","toLowerCase","category","filtered","categories","index","array","indexOf"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport {Link} from 'react-router-dom';\nimport Filter from '../filter/Filter.js';\nimport OneChallenge from './OneChallenge';\nimport './Challenges.css';\n\nexport default class Challenges extends Component {\n\n  state = {\n    challenges: [],\n    //filter\n    searchFilter: '',\n    categoryFilter: '',\n    favoritesFilter: false,\n  }\n\n  getData = () => {\n    axios.get('/api/challenges')\n      .then(response => {        \n        this.setState({\n          challenges: response.data\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  setFilter = (name, value) => {\n    this.setState({ [name]: value })\n  }\n\n  filter = () => {\n    const favoriteIds = this.props.user.challenges.filter(challenge => {\n      return challenge.status === 'favorite'\n    }).map(challenge => challenge.id._id)\n\n    const excludedIds = this.props.user.challenges.filter(challenge => {\n      return challenge.status === 'active' || challenge.status === 'completed' || challenge.status === 'withdrawn'\n    }).map(challenge => challenge.id._id)\n    \n    if (this.state.favoritesFilter) {\n      return this.state.challenges.filter(challenge => { \n        return favoriteIds.includes(challenge._id)\n      })\n    } else {\n      return this.state.challenges.filter(challenge => { \n        // search bar filter\n        return `${challenge.title}${challenge.goal}`.toLowerCase().includes(this.state.searchFilter.toLowerCase()) &&\n        // categories filter\n        (this.state.categoryFilter === challenge.category || !this.state.categoryFilter) &&\n        // exclude active, completed and withdrawn challenges\n        !excludedIds.includes(challenge._id)\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const filtered = this.filter()\n\n    const categories = this.state.challenges.map(challenge => { return challenge.category})\n    .filter((category, index, array) => { return array.indexOf(category) === index })\n\n    return (\n      <div>\n        <div className=\"tool-bar\">\n          <Filter \n            // challenges={ this.state.challenges }\n            // user={ this.props.user}\n            categories={ categories }\n            setFilter={ this.setFilter }\n          />\n          <Link to=\"/challenges/create\"><img src=\"/images/plus.png\" /></Link>\n        </div>\n        <div className=\"challenges-container\">\n          {\n            filtered.map(challenge => {\n              return (\n                <OneChallenge \n                    challenge={ challenge }\n                    user={ this.props.user }\n                    getData={ this.getData }\n                    filtered={ filtered }\n                />\n              )\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}