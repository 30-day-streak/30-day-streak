{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/Profile.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport default class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      challenges: [],\n      statusFilter: '',\n      ownerFilter: false\n    };\n\n    this.getData = () => {\n      axios.get('/challenges').then(response => {\n        this.setState({\n          challenges: response.data\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.filter = () => {\n      if (this.state.ownerFilter) {\n        return this.state.challenges.filter(challenge => {\n          console.log('OWNER', challenge.owner, 'USER', this.props.user._id, 'EQUAL?', challenge.owner === this.props.user._id);\n          return challenge.owner === this.props.user._id;\n        });\n      } else {\n        return this.props.user.challenges.filter(challenge => {\n          //exclude active and favorite\n          return challenge.status !== 'active' && challenge.status !== 'favorite' && ( // filter challenge status - completed or withdrawn\n          this.state.statusFilter === challenge.status || !this.state.statusFilter);\n        });\n      }\n    };\n\n    this.handleChange = event => {\n      const name = event.target.name;\n      const value = event.target.type === 'checkbox' ? event.target.checked : event.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const filtered = this.filter();\n    console.log('FILTERED', filtered);\n    console.log('status', this.state.statusFilter);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-basic-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), \" \", this.props.user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), \" \", this.props.user.firstName, \" \", this.props.user.lastName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 14\n          }, this), \" \", this.props.user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-challenges-history\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Challenge History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tool-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"statusFilter\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"statusFilter\",\n              id: \"statusFilter\",\n              onChange: this.handleChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Show All\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"completed\",\n                children: \"Completed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"withdrawn\",\n                children: \"Withdrawn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: \"ownerFilter\",\n              name: \"ownerFilter\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"ownerFilter\",\n              children: \"Created by me\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"challenges-container\",\n        children: filtered.map(challenge => {\n          if (this.state.ownerFilter) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-header\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: challenge.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: challenge.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Goal:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 22\n                }, this), \" \", challenge.goal]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Daily Target:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 22\n                }, this), \" \", challenge.dailyTarget.description, \" \", challenge.dailyTarget.number, \" \", challenge.dailyTarget.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this)]\n            }, challenge._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this);\n          }\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: challenge.id.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: challenge.id.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 22\n              }, this), \" \", challenge.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Goal:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 22\n              }, this), \" \", challenge.id.goal]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Daily Target:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 22\n              }, this), \" \", challenge.id.dailyTarget.description, \" \", challenge.id.dailyTarget.number, \" \", challenge.id.dailyTarget.unit]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Start date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 22\n              }, this), \" \", challenge.startDate && challenge.startDate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Grand Prize:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 22\n              }, this), \" \", challenge.grandPrize]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this)]\n          }, challenge._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this) // { this.props.challenge.status }, { this.props.challenge.tracker }\n          // { this.props.challenge.id._id }  { this.props.challenge.id.owner }\n          ;\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/Profile.js"],"names":["React","Component","axios","Profile","state","challenges","statusFilter","ownerFilter","getData","get","then","response","setState","data","catch","err","console","log","filter","challenge","owner","props","user","_id","status","handleChange","event","name","target","value","type","checked","componentDidMount","render","filtered","username","firstName","lastName","email","map","category","title","goal","dailyTarget","description","number","unit","id","startDate","grandPrize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nexport default class Profile extends Component {\n\n  state = {\n    challenges: [],\n    statusFilter: '',\n    ownerFilter: false,\n  }\n\n  getData = () => {\n    axios.get('/challenges')\n      .then(response => {        \n        this.setState({\n          challenges: response.data\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  filter = () => {\n\n    if (this.state.ownerFilter) {\n      return this.state.challenges.filter(challenge => {\n        console.log('OWNER', challenge.owner, 'USER', this.props.user._id, 'EQUAL?', challenge.owner === this.props.user._id)\n        return challenge.owner === this.props.user._id\n      })\n    } else {\n      return this.props.user.challenges.filter(challenge => {\n        //exclude active and favorite\n        return challenge.status !== 'active' && challenge.status !== 'favorite' &&\n        // filter challenge status - completed or withdrawn\n          (this.state.statusFilter === challenge.status || !this.state.statusFilter)        \n      })\n    }\n  }\n\n  handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.type === 'checkbox' ? event.target.checked : event.target.value\n    this.setState({ [name]: value })\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const filtered = this.filter()\n    console.log('FILTERED', filtered)\n    console.log('status', this.state.statusFilter)\n\n    return (\n      <>\n        <div className=\"profile-basic-info\">\n          <h2>Profile</h2>\n          <p>\n            <b>Username:</b> {this.props.user.username}\n          </p>\n          <p>\n            <b>Name:</b> {this.props.user.firstName} {this.props.user.lastName}\n          </p>\n          <p><b>Email:</b> {this.props.user.email}</p>\n        </div>\n\n        <div className=\"profile-challenges-history\">\n          <h2>Challenge History</h2>\n\n            <div className=\"tool-box\">\n              <div className=\"statusFilter\">\n                <select name=\"statusFilter\" id=\"statusFilter\" onChange={this.handleChange}>\n                  <option value=\"\">Show All</option>\n                  <option value=\"completed\">Completed</option>\n                  <option value=\"withdrawn\">Withdrawn</option>\n                </select>\n              </div>\n  \n              <div className=\"filter\">\n                <input \n                  type=\"checkbox\" \n                  id=\"ownerFilter\" \n                  name=\"ownerFilter\" \n                  onChange={this.handleChange}\n                />\n                <label htmlFor=\"ownerFilter\">Created by me</label>\n              </div>\n            </div>\n        </div>\n\n        <div className=\"challenges-container\">\n          { \n            filtered.map(challenge => {\n              if (this.state.ownerFilter) {\n                return (\n                  <div className=\"card\" key={ challenge._id }>\n                  <div className='card-header'>\n                    <p>{ challenge.category }</p>\n                  </div>\n                  <h3>{ challenge.title }</h3>\n                  <hr/>\n                  <p><strong>Goal:</strong> { challenge.goal }</p>\n                  <p><strong>Daily Target:</strong> { challenge.dailyTarget.description } { challenge.dailyTarget.number } { challenge.dailyTarget.unit }</p>\n                </div>\n                )\n              }\n              return (\n                <div className=\"card\" key={ challenge._id }>\n                  <div className='card-header'>\n                    <p>{ challenge.id.category }</p>\n                  </div>\n                  <h3>{ challenge.id.title }</h3>\n                  <hr/>\n                  <p><strong>Status:</strong> { challenge.status }</p>\n                  <p><strong>Goal:</strong> { challenge.id.goal }</p>\n                  <p><strong>Daily Target:</strong> { challenge.id.dailyTarget.description } { challenge.id.dailyTarget.number } { challenge.id.dailyTarget.unit }</p>\n                  <p><strong>Start date:</strong> { challenge.startDate && challenge.startDate }</p>\n                  <p><strong>Grand Prize:</strong> { challenge.grandPrize }</p>\n                </div>\n                // { this.props.challenge.status }, { this.props.challenge.tracker }\n                // { this.props.challenge.id._id }  { this.props.challenge.id.owner }\n              )\n            })\n          }\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}