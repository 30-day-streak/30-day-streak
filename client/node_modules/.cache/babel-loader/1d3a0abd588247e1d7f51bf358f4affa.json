{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import'./CreateChallenge.css';var CreateChallenge=/*#__PURE__*/function(_Component){_inherits(CreateChallenge,_Component);var _super=_createSuper(CreateChallenge);function CreateChallenge(){var _this;_classCallCheck(this,CreateChallenge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:'',goal:'',dailyTargetDescription:'',category:'',user:_this.props.user,challengeID:''};_this.handleChange=function(event){var name=event.target.name;var value=event.target.value;_this.setState(_defineProperty({},name,value));};_this.handleSubmitLater=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var id,newChallenge,user,updatedUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('clicked');event.preventDefault();console.log('user before post',_this.state.user);id=_this.state.user._id;_context.prev=4;_context.next=7;return axios.post('/api/challenges',{title:_this.state.title,goal:_this.state.goal,dailyTarget:{description:_this.state.dailyTargetDescription},category:_this.state.category});case 7:newChallenge=_context.sent;user=_this.props.user;console.log('user',_this.props.user);user.challenges.unshift({id:newChallenge.data._id,status:'favorite',tracker:[]});_this.setState({user:_this.props.user});console.log('user after set state',_this.state.user);_context.next=15;return axios.put(\"/api/users/\".concat(id),{challenges:_this.state.user.challenges,rewards:_this.state.user.rewards});case 15:updatedUser=_context.sent;_this.props.history.push('/challenges');_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](4);console.log(_context.t0);case 22:case\"end\":return _context.stop();}}},_callee,null,[[4,19]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmitStart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var id,newChallenge,user,updatedUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log('clicked');\nevent.preventDefault();// console.log('user before post', this.state.user);\nid=_this.state.user._id;_context2.prev=2;_context2.next=5;return axios.post('/api/challenges',{title:_this.state.title,goal:_this.state.goal,dailyTarget:{description:_this.state.dailyTargetDescription},category:_this.state.category});case 5:newChallenge=_context2.sent;user=_this.props.user;// console.log('user', this.props.user);\nuser.challenges.unshift({id:newChallenge.data._id,status:'active',tracker:[]});_this.setState({user:_this.props.user});// console.log('user after set state', this.state.user);\n_context2.next=11;return axios.put(\"/api/users/\".concat(id),{challenges:_this.state.user.challenges,rewards:_this.state.user.rewards});case 11:updatedUser=_context2.sent;_this.props.history.push(\"/challenges/\".concat(newChallenge.data._id,\"/start\"));_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[2,15]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();return _this;}_createClass(CreateChallenge,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({user:this.props.user});}},{key:\"render\",value:function render(){// console.log(this.props.user);\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"create-challenge-page\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"create-challenge-form\",id:\"create-challenge-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create a Challenge\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-challenge-form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:this.state.title,onChange:this.handleChange,placeholder:\"Example Title: Get More Sleep\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-challenge-form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"goal\",children:\"Goal:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",id:\"goal\",name:\"goal\",value:this.state.goal,onChange:this.handleChange,placeholder:\"Example Goal: Improve my sleep habits so I feel more rested and alert throughout the day\",required:true,textarea:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-challenge-form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dailyTargetDescription\",children:\"Daily Action:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"dailyTargetDescription\",name:\"dailyTargetDescription\",value:this.state.dailyTargetDescription,onChange:this.handleChange,placeholder:\"Example Action: Get 8 hours of sleep each night\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-challenge-form-item create-challenge-form-select\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",id:\"category\",value:this.state.category,onChange:this.handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"health\",children:\"Health\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fitness\",children:\"Fitness\"}),/*#__PURE__*/_jsx(\"option\",{value:\"career\",children:\"Career\"}),/*#__PURE__*/_jsx(\"option\",{value:\"productivity\",children:\"Productivity\"}),/*#__PURE__*/_jsx(\"option\",{value:\"finance\",children:\"Finance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-challenge-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-light\",form:\"create-challenge-form\",onClick:this.handleSubmitLater,children:\"Save for later\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-dark\",form:\"create-challenge-form\",onClick:this.handleSubmitStart,children:\"Start now!\"})]})]})})});}}]);return CreateChallenge;}(Component);export{CreateChallenge as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/CreateChallenge.js"],"names":["React","Component","axios","Link","CreateChallenge","state","title","goal","dailyTargetDescription","category","user","props","challengeID","handleChange","event","name","target","value","setState","handleSubmitLater","console","log","preventDefault","id","_id","post","dailyTarget","description","newChallenge","challenges","unshift","data","status","tracker","put","rewards","updatedUser","history","push","handleSubmitStart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './CreateChallenge.css'\n\nexport default class CreateChallenge extends Component {\n  state = {\n    title: '',\n    goal: '',\n    dailyTargetDescription: '',\n    category: '',\n    user: this.props.user,\n    challengeID: '',\n  };\n\n  handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleSubmitLater = async (event) => {\n    console.log('clicked');\n    event.preventDefault();\n    console.log('user before post', this.state.user);\n    let id = this.state.user._id;\n    try {\n      const newChallenge = await axios.post('/api/challenges', {\n        title: this.state.title,\n        goal: this.state.goal,\n        dailyTarget: {\n          description: this.state.dailyTargetDescription,\n        },\n        category: this.state.category,\n      });\n\n      let user = this.props.user;\n      console.log('user', this.props.user);\n      user.challenges.unshift({\n        id: newChallenge.data._id,\n        status: 'favorite',\n        tracker: [],\n      });\n      this.setState({\n        user: this.props.user,\n      });\n      console.log('user after set state', this.state.user);\n\n      const updatedUser = await axios.put(`/api/users/${id}`, {\n        challenges: this.state.user.challenges, \n        rewards: this.state.user.rewards\n      });\n      this.props.history.push('/challenges');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  handleSubmitStart = async (event) => {\n    // console.log('clicked');\n    event.preventDefault();\n    // console.log('user before post', this.state.user);\n    let id = this.state.user._id;\n    try {\n      const newChallenge = await axios.post('/api/challenges', {\n        title: this.state.title,\n        goal: this.state.goal,\n        dailyTarget: {\n          description: this.state.dailyTargetDescription,\n        },\n        category: this.state.category,\n      });\n\n      let user = this.props.user;\n      // console.log('user', this.props.user);\n      user.challenges.unshift({\n        id: newChallenge.data._id,\n        status: 'active',\n        tracker: [],\n      });\n      this.setState({\n        user: this.props.user,\n      });\n      // console.log('user after set state', this.state.user);\n\n      const updatedUser = await axios.put(`/api/users/${id}`, {\n        challenges: this.state.user.challenges, \n        rewards: this.state.user.rewards\n      });\n      this.props.history.push(`/challenges/${newChallenge.data._id}/start`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  componentDidMount() {\n    this.setState({\n      user: this.props.user,\n    });\n  }\n\n  render() {\n    // console.log(this.props.user);\n    return (\n      <>\n        <div className=\"create-challenge-page\">\n          <form\n            className=\"create-challenge-form\"\n            id=\"create-challenge-form\"\n          >\n            <h1>Create a Challenge</h1>\n            {/* <h3>Here you can make your own customized challenge</h3> */}\n            <div className=\"create-challenge-form-item\">\n              <label htmlFor=\"title\">Title: </label>\n              <br />\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                value={this.state.title}\n                onChange={this.handleChange}\n                placeholder=\"Example Title: Get More Sleep\"\n                required\n              />\n            </div>\n\n            <div className=\"create-challenge-form-item\">\n              <label htmlFor=\"goal\">\n                Goal:\n              </label>\n              <br />\n              <textarea\n                type=\"text\"\n                id=\"goal\"\n                name=\"goal\"\n                value={this.state.goal}\n                onChange={this.handleChange}\n                placeholder=\"Example Goal: Improve my sleep habits so I feel more rested and alert throughout the day\"\n                required\n                textarea\n              />\n            </div>\n\n            <div className=\"create-challenge-form-item\">\n              <label htmlFor=\"dailyTargetDescription\">\n                Daily Action:\n              </label>\n              <br />\n              <input\n                type=\"text\"\n                id=\"dailyTargetDescription\"\n                name=\"dailyTargetDescription\"\n                value={this.state.dailyTargetDescription}\n                onChange={this.handleChange}\n                placeholder=\"Example Action: Get 8 hours of sleep each night\"\n                required\n              />\n            </div>\n\n            <div className=\"create-challenge-form-item create-challenge-form-select\">\n              <label htmlFor=\"category\">\n               Category: \n              </label>\n              <br />\n              <select\n                name=\"category\"\n                id=\"category\"\n                value={this.state.category}\n                onChange={this.handleChange}\n                required\n              >\n                <option value=\"health\">Health</option>\n                <option value=\"fitness\">Fitness</option>\n                <option value=\"career\">Career</option>\n                <option value=\"productivity\">Productivity</option>\n                <option value=\"finance\">Finance</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n          \n          <div className=\"create-challenge-buttons\">\n            <button className=\"button-light\" form=\"create-challenge-form\" onClick={this.handleSubmitLater}>\n              Save for later\n            </button>\n            <button className=\"button-dark\" form=\"create-challenge-form\" onClick={this.handleSubmitStart}>Start now!</button>\n            </div>\n          </form>\n        </div>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}