{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import'./Challenges.css';var OneChallenge=/*#__PURE__*/function(_Component){_inherits(OneChallenge,_Component);var _super=_createSuper(OneChallenge);function OneChallenge(){var _this;_classCallCheck(this,OneChallenge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={favorite:''};_this.toggleFavorite=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newFavorite,challengeID,updatedUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;newFavorite=!_this.state.favorite;// change state\n_this.setState({favorite:newFavorite});// update database\nchallengeID=_this.props.challenge._id;_context.next=6;return axios.put(\"/api/users/\".concat(challengeID,\"/challengesfavorite\"),{favorite:newFavorite});case 6:updatedUser=_context.sent;_this.props.setUser(updatedUser.data);// console.log('updated user data after favorite from axios', updatedUser.data);\n// console.log('state .user.challenges', this.props.user.challenges);\n//refresh displayed information\n_this.props.getData();_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));_this.initialSetUp=function(){//find instead of some?\n// console.log(this.props.user.challenges)\nvar foundInUserFavorites=_this.props.user.challenges.some(function(challenge){return challenge.id._id===_this.props.challenge._id&&challenge.status==='favorite';});_this.setState({favorite:foundInUserFavorites});};return _this;}_createClass(OneChallenge,[{key:\"componentDidMount\",value:function componentDidMount(){this.initialSetUp();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.filtered.length!==this.props.filtered.length){this.initialSetUp();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.props.challenge.category}),/*#__PURE__*/_jsx(\"img\",{src:this.state.favorite?'./images/favorite1.png':'./images/unfavorite1.png',onClick:this.toggleFavorite,alt:\"favorite\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:this.props.challenge.title}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:this.props.challenge.goal&&this.props.challenge.goal}),/*#__PURE__*/_jsx(Link,{to:\"/challenges/\".concat(this.props.challenge._id,\"/start\"),children:/*#__PURE__*/_jsx(\"button\",{className:\"button-light\",children:\"Start\"})})]},this.props.challenge._id)});}}]);return OneChallenge;}(Component);export{OneChallenge as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/OneChallenge.js"],"names":["React","Component","Link","axios","OneChallenge","state","favorite","toggleFavorite","newFavorite","setState","challengeID","props","challenge","_id","put","updatedUser","setUser","data","getData","console","log","initialSetUp","foundInUserFavorites","user","challenges","some","id","status","prevProps","prevState","filtered","length","category","title","goal"],"mappings":"woCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,C,GAEqBC,CAAAA,Y,mVACnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,C,OAIRC,c,sEAAiB,2LAEPC,WAFO,CAEO,CAAC,MAAKH,KAAL,CAAWC,QAFnB,CAGb;AACA,MAAKG,QAAL,CAAc,CAAEH,QAAQ,CAAEE,WAAZ,CAAd,EACA;AACME,WANO,CAMO,MAAKC,KAAL,CAAWC,SAAX,CAAqBC,GAN5B,uBAOaV,CAAAA,KAAK,CAACW,GAAN,sBAAwBJ,WAAxB,wBAA0D,CAClFJ,QAAQ,CAAEE,WADwE,CAA1D,CAPb,QAOPO,WAPO,eAUb,MAAKJ,KAAL,CAAWK,OAAX,CAAmBD,WAAW,CAACE,IAA/B,EACA;AACA;AACA;AACA,MAAKN,KAAL,CAAWO,OAAX,GAda,iFAgBbC,OAAO,CAACC,GAAR,cAhBa,qE,SAoBjBC,Y,CAAe,UAAM,CACnB;AACA;AACA,GAAMC,CAAAA,oBAAoB,CAAG,MAAKX,KAAL,CAAWY,IAAX,CAAgBC,UAAhB,CAA2BC,IAA3B,CAC3B,SAACb,SAAD,CAAe,CACb,MACEA,CAAAA,SAAS,CAACc,EAAV,CAAab,GAAb,GAAqB,MAAKF,KAAL,CAAWC,SAAX,CAAqBC,GAA1C,EACAD,SAAS,CAACe,MAAV,GAAqB,UAFvB,CAID,CAN0B,CAA7B,CASA,MAAKlB,QAAL,CAAc,CACZH,QAAQ,CAAEgB,oBADE,CAAd,EAGD,C,qGAEmB,CAClB,KAAKD,YAAL,GACD,C,8DAEkBO,S,CAAWC,S,CAAW,CACvC,GAAID,SAAS,CAACE,QAAV,CAAmBC,MAAnB,GAA8B,KAAKpB,KAAL,CAAWmB,QAAX,CAAoBC,MAAtD,CAA8D,CAC5D,KAAKV,YAAL,GACD,CACF,C,uCAEQ,CACP,mBACE,sCAEE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,mBAAI,KAAKV,KAAL,CAAWC,SAAX,CAAqBoB,QAAzB,EADF,cAEE,YACE,GAAG,CACD,KAAK3B,KAAL,CAAWC,QAAX,CACI,wBADJ,CAEI,0BAJR,CAME,OAAO,CAAE,KAAKC,cANhB,CAOE,GAAG,CAAC,UAPN,EAFF,GADF,cAaE,oBAAK,KAAKI,KAAL,CAAWC,SAAX,CAAqBqB,KAA1B,EAbF,cAcE,aAdF,cAeE,mBAAI,KAAKtB,KAAL,CAAWC,SAAX,CAAqBsB,IAArB,EAA6B,KAAKvB,KAAL,CAAWC,SAAX,CAAqBsB,IAAtD,EAfF,cAgBE,KAAC,IAAD,EAAM,EAAE,uBAAiB,KAAKvB,KAAL,CAAWC,SAAX,CAAqBC,GAAtC,UAAR,uBACE,eAAQ,SAAS,CAAC,cAAlB,mBADF,EAhBF,GAA2B,KAAKF,KAAL,CAAWC,SAAX,CAAqBC,GAAhD,CAFF,EADF,CA0BD,C,0BA/EuCZ,S,SAArBG,Y","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './Challenges.css';\n\nexport default class OneChallenge extends Component {\n  state = {\n    favorite: '',\n  };\n\n  toggleFavorite = async () => {\n    try {\n      const newFavorite = !this.state.favorite;\n      // change state\n      this.setState({ favorite: newFavorite });\n      // update database\n      const challengeID = this.props.challenge._id;\n      const updatedUser = await axios.put(`/api/users/${challengeID}/challengesfavorite`, {\n        favorite: newFavorite,\n      });\n      this.props.setUser(updatedUser.data)\n      // console.log('updated user data after favorite from axios', updatedUser.data);\n      // console.log('state .user.challenges', this.props.user.challenges);\n      //refresh displayed information\n      this.props.getData();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  initialSetUp = () => {\n    //find instead of some?\n    // console.log(this.props.user.challenges)\n    const foundInUserFavorites = this.props.user.challenges.some(\n      (challenge) => {\n        return (\n          challenge.id._id === this.props.challenge._id &&\n          challenge.status === 'favorite'\n        );\n      }\n    );\n\n    this.setState({\n      favorite: foundInUserFavorites,\n    });\n  };\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      this.initialSetUp();\n    }\n  }\n\n  render() {\n    return (\n      <>\n        {/* <div class=\"container center\"> */}\n        <div className=\"card\" key={this.props.challenge._id}>\n          <div className=\"card-header\">\n            <p>{this.props.challenge.category}</p>\n            <img\n              src={\n                this.state.favorite\n                  ? './images/favorite1.png'\n                  : './images/unfavorite1.png'\n              }\n              onClick={this.toggleFavorite}\n              alt=\"favorite\"\n            />\n          </div>\n          <h3>{this.props.challenge.title}</h3>\n          <hr />\n          <p>{this.props.challenge.goal && this.props.challenge.goal}</p>\n          <Link to={`/challenges/${this.props.challenge._id}/start`}>\n            <button className=\"button-light\">Start</button>\n          </Link>\n        </div>\n        {/* </div> */}\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}