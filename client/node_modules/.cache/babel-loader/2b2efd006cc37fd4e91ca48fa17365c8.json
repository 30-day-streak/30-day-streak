{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/StartChallenge.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport './Challenges.css';\nexport default class StartChallenge extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      goal: '',\n      dailyTargetDescription: '',\n      dailyTargetNumber: '',\n      dailyTargetUnit: '',\n      prize: '',\n      user: ''\n    };\n\n    this.handleChange = event => {\n      const name = event.target.name;\n      const value = event.target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.getData = () => {\n      const challengeId = this.props.match.params.id;\n      axios.get(`/api/challenges/${challengeId}`).then(response => {\n        this.setState({\n          title: response.data.title,\n          goal: response.data.goal,\n          dailyTargetDescription: response.data.dailyTarget.description,\n          dailyTargetNumber: response.data.dailyTarget.number,\n          dailyTargetUnit: response.data.dailyTarget.unit\n        });\n      }).catch(err => {\n        console.log('error', err);\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.getData();\n      this.setState({\n        user: this.props.user\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      let userId = this.state.user._id;\n      const challengeId = this.props.match.params.id;\n\n      try {\n        let user = this.props.user;\n        const alreadyInUser = user.challenges.some(challenge => {\n          return challenge.id._id === challengeId;\n        });\n\n        if (alreadyInUser) {\n          user = user.challenges.map(challenge => {\n            if (challenge.id._id === challengeId) {\n              challenge.status = 'active';\n              challenge.startDate = new Date();\n              challenge.tracker = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n              challenge.grandPrize = this.state.prize;\n            }\n\n            return challenge;\n          });\n        } else {\n          user.challenges.unshift({\n            id: this.props.match.params.id,\n            status: 'active',\n            tracker: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            startDate: new Date(),\n            grandPrize: this.state.prize\n          });\n        }\n\n        this.setState({\n          user: this.props.user\n        });\n        const updatedUser = await axios.put(`/api/users/${userId}`, {\n          challenges: this.state.user.challenges,\n          rewards: this.state.user.rewards\n        });\n        console.log('updatedUser.data', updatedUser.data);\n        this.props.setUser(updatedUser.data); // let updatedUser = await axios.get('/auth/loggedin')\n\n        const {\n          history\n        } = this.props;\n        history.push('/');\n      } catch (error) {\n        console.log(error);\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"start-challenge-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"start-challenge-page-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Congratulations!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Here is the information for the CHALLENGE you're starting TODAY!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: this.state.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Goal: \", this.state.goal]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Daily target: \", this.state.dailyTargetDescription, ' ', this.state.dailyTargetNumber, \" \", this.state.dailyTargetUnit]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Pick your GRAND PRIZE for completing it\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"prize\",\n            children: \"Prize\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"prize\",\n            name: \"prize\",\n            value: this.state.prize,\n            onChange: this.handleChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button-dark\",\n            type: \"submit\",\n            onSubmit: this.handleSubmit,\n            children: \"Let's do it!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/StartChallenge.js"],"names":["React","Component","axios","StartChallenge","state","title","goal","dailyTargetDescription","dailyTargetNumber","dailyTargetUnit","prize","user","handleChange","event","name","target","value","setState","getData","challengeId","props","match","params","id","get","then","response","data","dailyTarget","description","number","unit","catch","err","console","log","componentDidMount","handleSubmit","preventDefault","userId","_id","alreadyInUser","challenges","some","challenge","map","status","startDate","Date","tracker","grandPrize","unshift","updatedUser","put","rewards","setUser","history","push","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './Challenges.css'\n\n\nexport default class StartChallenge extends Component {\n  state = {\n    title: '',\n    goal: '',\n    dailyTargetDescription: '',\n    dailyTargetNumber: '',\n    dailyTargetUnit: '',\n    prize: '',\n    user: '',\n  };\n\n  handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  getData = () => {\n    const challengeId = this.props.match.params.id;\n    axios\n      .get(`/api/challenges/${challengeId}`)\n      .then((response) => {\n        this.setState({\n          title: response.data.title,\n          goal: response.data.goal,\n          dailyTargetDescription: response.data.dailyTarget.description,\n          dailyTargetNumber: response.data.dailyTarget.number,\n          dailyTargetUnit: response.data.dailyTarget.unit,\n        });\n      })\n      .catch((err) => {\n        console.log('error', err);\n      });\n  };\n\n  // activate this with get data\n  componentDidMount = () => {\n    this.getData();\n    this.setState({\n      user: this.props.user,\n    });\n  };\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    let userId = this.state.user._id;\n    const challengeId = this.props.match.params.id;\n    try {\n      let user = this.props.user;\n      const alreadyInUser = user.challenges.some((challenge) => {\n        return challenge.id._id === challengeId;\n      });\n      if (alreadyInUser) {\n        user = user.challenges.map((challenge) => {\n          if (challenge.id._id === challengeId) {\n            challenge.status = 'active';\n            challenge.startDate = new Date();\n            challenge.tracker = [\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n              0,\n            ];\n            challenge.grandPrize = this.state.prize;\n          }\n          return challenge;\n        });\n      } else {\n        user.challenges.unshift({\n          id: this.props.match.params.id,\n          status: 'active',\n          tracker: [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n          ],\n          startDate: new Date(),\n          grandPrize: this.state.prize\n        });\n      }\n      this.setState({\n        user: this.props.user,\n      });\n      const updatedUser = await axios.put(`/api/users/${userId}`, {\n        challenges: this.state.user.challenges,\n        rewards: this.state.user.rewards,\n      });\n      console.log('updatedUser.data', updatedUser.data);\n      this.props.setUser(updatedUser.data)\n      // let updatedUser = await axios.get('/auth/loggedin')\n      const {history} = this.props\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"start-challenge-page\">\n        <div className=\"start-challenge-page-content\">\n          <h1>Congratulations!</h1>\n          <p>\n            Here is the information for the CHALLENGE you're starting TODAY!\n          </p>\n          <h3>{this.state.title}</h3>\n          <p>Goal: {this.state.goal}</p>\n          <p>\n            Daily target: {this.state.dailyTargetDescription}{' '}\n            {this.state.dailyTargetNumber} {this.state.dailyTargetUnit}\n          </p>\n          <h2>Pick your GRAND PRIZE for completing it</h2>\n          <form onSubmit={this.handleSubmit}>\n            <label htmlFor=\"prize\">Prize</label>\n            <input\n              type=\"text\"\n              id=\"prize\"\n              name=\"prize\"\n              value={this.state.prize}\n              onChange={this.handleChange}\n              required\n            />\n            <button className=\"button-dark\" type=\"submit\" onSubmit={this.handleSubmit}>\n              Let's do it!\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}