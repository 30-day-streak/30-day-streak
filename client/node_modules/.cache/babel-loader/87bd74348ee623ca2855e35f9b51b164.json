{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/rewards/OneReward.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../challenges/Challenges.css';\nexport default class OneReward extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      favorite: ''\n    };\n\n    this.toggleFavorite = async () => {\n      try {\n        const newFavorite = !this.state.favorite; // 1. via Apps.js\n        // this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n\n        this.setState({\n          favorite: newFavorite\n        }); // 2. the way it's done with challenges / different route\n\n        const rewardID = this.props.reward._id; // 3. toggleFavoriteReward but moved from App.js\n        // const updatedUser = this.props.user;\n        // console.log('newFavorite', newFavorite)\n        // console.log('user', updatedUser.rewards)\n        // if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n        // else {\n        //   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n        //     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n        //     return profileRewardId._id !== this.props.reward._id\n        //   });\n        //   console.log('updated user', updatedUser.rewards)\n        //   // updatedUser.rewards.pop(this.props.reward._id);\n        // }\n        // this.props.setUser(updatedUser);\n        // axios.put(`/users/${updatedUser._id}`, {\n        //   rewards: updatedUser.rewards\n        // })\n        //update state\n\n        const updatedUser = await axios.put(`/api/users/${rewardID}/rewardsfavorite`, {\n          favorite: newFavorite\n        });\n        console.log('udpatedUser', updatedUser.data);\n        this.props.setUser(updatedUser.data);\n        console.log('user after set new user', this.props.user); // refresh data\n\n        this.props.getData();\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.initialSetUp = () => {\n      const foundInUserFavorites = this.props.user.rewards.some(reward => {\n        return reward._id === this.props.reward._id;\n      });\n      this.setState({\n        favorite: foundInUserFavorites\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      this.initialSetUp();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.props.reward.category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.favorite ? './images/favorite1.png' : './images/unfavorite1.png',\n          onClick: this.toggleFavorite,\n          alt: \"favorite\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: this.props.reward.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.props.reward.description && this.props.reward.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), this.props.reward.url && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"{this.props.reward.url}\",\n        children: \"Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 35\n      }, this)]\n    }, this.props.reward._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/rewards/OneReward.js"],"names":["React","Component","axios","OneReward","state","favorite","toggleFavorite","newFavorite","setState","rewardID","props","reward","_id","updatedUser","put","console","log","data","setUser","user","getData","error","initialSetUp","foundInUserFavorites","rewards","some","componentDidMount","componentDidUpdate","prevProps","prevState","filtered","length","render","category","name","description","url"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport '../challenges/Challenges.css';\n\nexport default class OneReward extends Component {\n  state = {\n    favorite: '',\n  };\n\n  toggleFavorite = async () => {\n    try {\n      const newFavorite = !this.state.favorite;\n\n      // 1. via Apps.js\n      // this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n      this.setState({ favorite: newFavorite });\n      // 2. the way it's done with challenges / different route\n      const rewardID = this.props.reward._id;\n      // 3. toggleFavoriteReward but moved from App.js\n      // const updatedUser = this.props.user;\n      // console.log('newFavorite', newFavorite)\n      // console.log('user', updatedUser.rewards)\n      // if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n      // else {\n      //   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n      //     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n      //     return profileRewardId._id !== this.props.reward._id\n      //   });\n      //   console.log('updated user', updatedUser.rewards)\n      //   // updatedUser.rewards.pop(this.props.reward._id);\n      // }\n      // this.props.setUser(updatedUser);\n      // axios.put(`/users/${updatedUser._id}`, {\n      //   rewards: updatedUser.rewards\n      // })\n\n      //update state\n\n      const updatedUser = await axios.put(\n        `/api/users/${rewardID}/rewardsfavorite`,\n        {\n          favorite: newFavorite,\n        }\n      );\n      console.log('udpatedUser', updatedUser.data);\n      this.props.setUser(updatedUser.data)\n      console.log('user after set new user', this.props.user);\n      // refresh data\n      this.props.getData();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  initialSetUp = () => {\n    const foundInUserFavorites = this.props.user.rewards.some((reward) => {\n      return reward._id === this.props.reward._id;\n    });\n\n    this.setState({\n      favorite: foundInUserFavorites,\n    });\n  };\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      this.initialSetUp();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"card\" key={this.props.reward._id}>\n        <div className=\"card-header\">\n          <p>{this.props.reward.category}</p>\n          <img\n            src={\n              this.state.favorite\n                ? './images/favorite1.png'\n                : './images/unfavorite1.png'\n            }\n            onClick={this.toggleFavorite}\n            alt=\"favorite\"\n          />\n        </div>\n        <h3>{this.props.reward.name}</h3>\n        <hr />\n        <p>{this.props.reward.description && this.props.reward.description}</p>\n\n        {this.props.reward.url && <a href=\"{this.props.reward.url}\">Link</a>}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}