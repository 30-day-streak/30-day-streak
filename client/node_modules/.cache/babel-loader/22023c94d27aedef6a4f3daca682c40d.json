{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';import React,{Component}from'react';import{Route,Switch,Redirect}from'react-router-dom';import SignUp from'./components/auth/SignUp';import Login from'./components/auth/Login';import CreateReward from\"./components/CreateReward\";import Navbar from'./components/navbar/Navbar';import Challenges from'./components/challenges/Challenges';import CreateChallenge from'./components/challenges/CreateChallenge';import StartChallenge from'./components/challenges/StartChallenge';import Rewards from'./components/Rewards';// import axios from 'axios';\nimport Dashboard from'./components/dashboard/Dashboard';import Modal from'./components/modal/Modal';import Profile from'./components/Profile';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={user:_this.props.user,modalIsActive:false,modalEvent:\"\",modalReward:{}};_this.setUser=function(user){_this.setState({user:user});};_this.modalOff=function(){_this.setState({modalIsActive:false,modalEvent:\"\",modalReward:{}});};_this.notifyMilestone=function(notification){console.log(\"milestone notified:\",notification);var milestone=notification[0];var reward=notification[1];var challengeId=notification[2];var changedToggle=notification[3];console.log({milestone:milestone},{reward:reward},{changedToggle:changedToggle});_this.setState({modalIsActive:true,modalEvent:milestone,modalReward:reward});var userChallenges=_this.props.user.challenges.map(function(challenge){console.log(challenge[changedToggle]);//   if (challenge.id == challengeId){\n//     challenge[changedToggle] = false\n//   }\n// })\n// console.log(userChallenges);\n// const updatedUser = await axios.put(`api/users/${this.state.user._id}`), {\n//   challenges: this.state.user.challenges,\n// })\n});return null;};return _this;}_createClass(App,[{key:\"render\",// toggleFavoriteReward = (rewardId, favStatus) => {\n//   console.log(`toggling`, rewardId, favStatus);\n//   const updatedUser = this.state.user\n//   if (favStatus) {\n//     updatedUser.rewards.push(rewardId);\n//     console.log(`updated user rewards`, updatedUser.rewards);\n//   } else {\n//     updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n//       console.log({ profileRewardId }, { rewardId })\n//       return profileRewardId !== rewardId\n//     });\n//     console.log(`updated user rewards`, updatedUser.rewards);\n//   }\n//   this.setState({\n//     user: updatedUser\n//   })\n//   axios.put(`/users/${updatedUser._id}`, {\n//     challenges: updatedUser.challenges,\n//     rewards: updatedUser.rewards\n//   })\n// }\nvalue:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{user:this.state.user,setUser:this.setUser}),this.state.modalIsActive&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsx(Modal,{modalIsActive:this.state.modalIsActive,modalOff:this.modalOff,event:this.state.modalEvent,reward:this.state.modalReward})}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/signup\",render:function render(props){return/*#__PURE__*/_jsx(SignUp,_objectSpread({setUser:_this2.setUser},props));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",render:function render(props){return/*#__PURE__*/_jsx(Login,_objectSpread({setUser:_this2.setUser},props));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/_jsx(Dashboard,_objectSpread({notifyMilestone:_this2.notifyMilestone,setUser:_this2.setUser,user:_this2.state.user},props));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/challenges\",render:function render(props){if(_this2.state.user)return/*#__PURE__*/_jsx(Challenges,_objectSpread(_objectSpread({},props),{},{user:_this2.state.user}));else return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/challenges/create\",render:function render(props){return/*#__PURE__*/_jsx(CreateChallenge,_objectSpread(_objectSpread({setUser:_this2.setUser},props),{},{user:_this2.state.user}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/rewards/create\",render:function render(props){return/*#__PURE__*/_jsx(CreateReward,_objectSpread({setUser:_this2.setUser},props));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/rewards\",render:function render(props){if(_this2.state.user)return/*#__PURE__*/_jsx(Rewards,_objectSpread(_objectSpread({},props),{},{user:_this2.state.user,setUser:_this2.setUser// toggleFavoriteReward={this.toggleFavoriteReward}\n}));else return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/challenges/:id/start\",render:function render(props){return/*#__PURE__*/_jsx(StartChallenge,_objectSpread(_objectSpread({setUser:_this2.setUser},props),{},{user:_this2.state.user}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/profile\",render:function render(props){return/*#__PURE__*/_jsx(Profile,_objectSpread(_objectSpread({setUser:_this2.setUser},props),{},{user:_this2.state.user}));}})]})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/App.js"],"names":["React","Component","Route","Switch","Redirect","SignUp","Login","CreateReward","Navbar","Challenges","CreateChallenge","StartChallenge","Rewards","Dashboard","Modal","Profile","App","state","user","props","modalIsActive","modalEvent","modalReward","setUser","setState","modalOff","notifyMilestone","notification","console","log","milestone","reward","challengeId","changedToggle","userChallenges","challenges","map","challenge"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport SignUp from './components/auth/SignUp';\nimport Login from './components/auth/Login';\nimport CreateReward from \"./components/CreateReward\";\nimport Navbar from './components/navbar/Navbar';\nimport Challenges from './components/challenges/Challenges';\nimport CreateChallenge from './components/challenges/CreateChallenge';\nimport StartChallenge from './components/challenges/StartChallenge'\nimport Rewards from './components/Rewards';\n// import axios from 'axios';\nimport Dashboard from './components/dashboard/Dashboard';\nimport Modal from './components/modal/Modal';\nimport Profile from './components/Profile'\n\nclass App extends Component {\n\n  state = {\n    user: this.props.user,\n    modalIsActive: false,\n    modalEvent: \"\",\n    modalReward: {},\n  }\n\n  setUser = user => {\n    this.setState({\n      user: user\n    })\n  }\n\n  modalOff = () => {\n    this.setState({\n      modalIsActive: false,\n      modalEvent: \"\",\n      modalReward: {}\n    })\n  }\n\n  notifyMilestone = (notification) => {\n    console.log(`milestone notified:`, notification);\n\n    const milestone = notification[0];\n    const reward = notification[1];\n    const challengeId = notification[2]\n    const changedToggle = notification[3]\n    console.log({ milestone }, { reward }, { changedToggle })\n    this.setState({\n      modalIsActive: true,\n      modalEvent: milestone,\n      modalReward: reward\n    })\n\n\n    const userChallenges = this.props.user.challenges.map(challenge => {\n      console.log(challenge[changedToggle]);\n\n      //   if (challenge.id == challengeId){\n      //     challenge[changedToggle] = false\n      //   }\n      // })\n      // console.log(userChallenges);\n\n      // const updatedUser = await axios.put(`api/users/${this.state.user._id}`), {\n      //   challenges: this.state.user.challenges,\n      // })\n    });\n    return null;\n  }\n\n\n\n\n  // toggleFavoriteReward = (rewardId, favStatus) => {\n  //   console.log(`toggling`, rewardId, favStatus);\n  //   const updatedUser = this.state.user\n  //   if (favStatus) {\n  //     updatedUser.rewards.push(rewardId);\n  //     console.log(`updated user rewards`, updatedUser.rewards);\n  //   } else {\n  //     updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n  //       console.log({ profileRewardId }, { rewardId })\n  //       return profileRewardId !== rewardId\n  //     });\n  //     console.log(`updated user rewards`, updatedUser.rewards);\n  //   }\n  //   this.setState({\n  //     user: updatedUser\n  //   })\n  //   axios.put(`/users/${updatedUser._id}`, {\n  //     challenges: updatedUser.challenges,\n  //     rewards: updatedUser.rewards\n  //   })\n  // }\n\n  render() {\n    return (\n      <div className=\"App\" >\n\n        <Navbar user={this.state.user} setUser={this.setUser} />\n\n        { this.state.modalIsActive && <div className=\"modal\">\n          <Modal\n            modalIsActive={this.state.modalIsActive}\n            modalOff={this.modalOff}\n            event={this.state.modalEvent}\n            reward={this.state.modalReward}\n          />\n        </div>\n        }\n\n        < Switch >\n          <Route\n            exact\n            path='/signup'\n            render={props => <SignUp setUser={this.setUser} {...props} />}\n          />\n\n          <Route\n            exact\n            path='/login'\n            render={props => <Login setUser={this.setUser} {...props} />}\n          />\n          <Route\n            exact\n            path='/'\n            render={props => <Dashboard\n              notifyMilestone={this.notifyMilestone}\n              setUser={this.setUser}\n              user={this.state.user} {...props} />}\n          />\n          <Route\n            exact\n            path='/challenges'\n            render={props => {\n              if (this.state.user) return <Challenges {...props} user={this.state.user} />\n              else return <Redirect to='/' />\n            }}\n          />\n          <Route\n            exact\n            path='/challenges/create'\n            render={props => <CreateChallenge setUser={this.setUser} {...props} user={this.state.user} />}\n          />\n          <Route\n            exact\n            path=\"/rewards/create\"\n            render={props => <CreateReward setUser={this.setUser} {...props} />}\n          />\n          <Route\n            exact\n            path='/rewards'\n            render={props => {\n              if (this.state.user) return (\n                <Rewards\n                  {...props}\n                  user={this.state.user}\n                  setUser={this.setUser}\n                // toggleFavoriteReward={this.toggleFavoriteReward}\n                />)\n              else return (<Redirect to='/' />)\n            }}\n          />\n          <Route\n            exact\n            path='/challenges/:id/start'\n            render={props => <StartChallenge setUser={this.setUser} {...props} user={this.state.user} />}\n          />\n\n          <Route\n            exact\n            path='/profile'\n            render={props => <Profile setUser={this.setUser} {...props} user={this.state.user} />}\n          />\n\n        </Switch >\n\n      </div >\n    );\n  }\n}\n\n\nexport default App;"]},"metadata":{},"sourceType":"module"}