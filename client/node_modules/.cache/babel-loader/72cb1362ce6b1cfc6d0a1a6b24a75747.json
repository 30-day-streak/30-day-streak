{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import ActiveChallengeDetails from'./ActiveChallengeDetails';import TrackerButton from'./TrackerButton';import'./ActiveChallengePreview.css';var ActiveChallengePreview=/*#__PURE__*/function(_Component){_inherits(ActiveChallengePreview,_Component);var _super=_createSuper(ActiveChallengePreview);function ActiveChallengePreview(){var _this;_classCallCheck(this,ActiveChallengePreview);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={challengeDay:0,activeChallengeDetails:false};_this.toggleChallengeDetails=function(){_this.setState(function(prevState){return{activeChallengeDetails:!prevState.activeChallengeDetails};});};_this.selectReward=function(){var rewards=_this.props.user.rewards;var chosenRewardIndex=Math.floor(Math.random()*rewards.length);return rewards[chosenRewardIndex];};_this.notifier=function(){var today=_this.state.challengeDay;var thisProjectsTracker=_this.props.challenge.tracker;var streakStatusData=_this.props.streakStatus(_this.props.challenge.tracker,today);// console.log({ streakStatusData });\n// console.log(`thisProjectTracker ${thisProjectsTracker}, today ${today}`);\n// console.log({ streakStatusData });\n// console.log(`tracker today`, thisProjectsTracker[today - 1]);\n// console.log(`current streak`, streakStatusData.currentStreak);\n// console.log(`this.props.challenge.subGoals7DayStreak`, this.props.challenge.subGoals7DayStreak);\n//7-day streak\nif(thisProjectsTracker[today-1]===1&&streakStatusData.currentStreak===7&&_this.props.challenge.subGoals7DayStreak===false){console.log(\"7 day streak\");_this.props.challenge.subGoals7DayStreak=true;var todaysReward=_this.selectReward();return[\"7\",todaysReward];//show notification\n}//half-way\nif(thisProjectsTracker[today-1]===1&&today>=(15||16||17)&&_this.props.challenge.notification15Days===false){console.log(\"half way\");_this.props.challenge.notification15Days=true;return[\"15\",{}];//show a notification\n}//21-day streak\nif(thisProjectsTracker[today-1]===1&&streakStatusData.currentStreak===21&&_this.props.challenge.subGoals21DayStreak===false){console.log(\"21-day streak\");_this.props.challenge.subGoals21DayStreak=true;var _todaysReward=_this.selectReward();return[\"21\",_todaysReward];//select prize\n//show notification\n}//nearly there\nif(thisProjectsTracker[today-1]===1&&today===28&&_this.props.challenge.notification28Days===false){console.log(\"nearly there\");_this.props.challenge.notification15Days=true;return[28,{}];//show notification\n}//completion\nif(today>=30&&_this.props.challenge.notificationComplete===false){_this.props.challenge.notificationComplete=true;if(streakStatusData.daysCompleted===30){return[\"success\",{}];//main goal\n}else{return[\"notQuite\",{}];}};};_this.withdrawFromChallenge=function(){axios.put(\"/users/\".concat(_this.props.challenge.id._id,\"/withdraw\"),{status:'withdrawn'}).then(function(){console.log('test');// this.props.history.push('/')\n});};_this.handleChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var target,value,name,challengeTracker,index,userId,updatedUser,refresh;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;target=event.target;value=target.checked;name=target.id;challengeTracker=_this.props.challenge.tracker;index=target.id;if(!(event.target.id<_this.props.challengeDay)){_context.next=14;break;}if(challengeTracker[index]===0){challengeTracker[index]++;}else if(challengeTracker[index]===1){challengeTracker[index]++;}else{challengeTracker[index]--;}// console.log('challenge tracker after click', challengeTracker);\n// console.log('state after click', this.state);\n_this.setState(_defineProperty({},name,value));userId=_this.state.user._id;_context.next=12;return axios.put(\"/api/users/\".concat(userId),{challenges:_this.state.user.challenges,rewards:_this.state.user.rewards});case 12:updatedUser=_context.sent;refresh=_this.props.refreshActiveChallengeDetails();case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(ActiveChallengePreview,[{key:\"componentDidMount\",value:function componentDidMount(){var challengeDay=this.props.calculateChallengeDay(this.props.challenge.startDate);this.setState({challengeDay:challengeDay});}},{key:\"render\",value:function render(){var challengeDay=this.state.challengeDay;var todayIndex=challengeDay-1;if(!this.props.challenge.id.title){window.location.reload(false);}else{console.log('props from preview ');return/*#__PURE__*/_jsxs(\"div\",{className:\"active-preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"preview-title\",children:/*#__PURE__*/_jsx(\"h5\",{children:this.props.challenge.id.title})}),/*#__PURE__*/_jsx(\"p\",{children:this.props.challenge.id.goal}),/*#__PURE__*/_jsxs(\"p\",{children:[this.props.challenge.id.dailyTarget.description,this.props.challenge.id.dailyTarget.number,this.props.challenge.id.dailyTarget.unit]}),/*#__PURE__*/_jsxs(\"div\",{className:\"awesome-button\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Click below to log today: \"}),/*#__PURE__*/_jsx(TrackerButton,{index:todayIndex,user:this.props.user,handleChange:this.handleChange,challenge:this.props.challenge,challengeDay:this.state.challengeDay})]}),this.state.activeChallengeDetails&&/*#__PURE__*/_jsx(ActiveChallengeDetails,{challenge:this.props.challenge,user:this.props.user,challengeDay:this.state.challengeDay,calculateChallengeDay:this.props.calculateChallengeDay,streakStatus:this.props.streakStatus,notifier:this.notifier}),!this.state.activeChallengeDetails&&/*#__PURE__*/_jsx(\"button\",{className:\"button-light\",onClick:this.toggleChallengeDetails,children:\"show details\"}),this.state.activeChallengeDetails&&/*#__PURE__*/_jsx(\"button\",{className:\"button-light\",onClick:this.toggleChallengeDetails,children:\"hide details\"}),this.state.activeChallengeDetails&&/*#__PURE__*/_jsx(\"button\",{className:\"button-light\",onClick:this.withdrawFromChallenge,children:\"i give up, i'm a bit fat looser\"})]});}}}]);return ActiveChallengePreview;}(Component);export{ActiveChallengePreview as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/dashboard/ActiveChallengePreview.js"],"names":["React","Component","axios","ActiveChallengeDetails","TrackerButton","ActiveChallengePreview","state","challengeDay","activeChallengeDetails","toggleChallengeDetails","setState","prevState","selectReward","rewards","props","user","chosenRewardIndex","Math","floor","random","length","notifier","today","thisProjectsTracker","challenge","tracker","streakStatusData","streakStatus","currentStreak","subGoals7DayStreak","console","log","todaysReward","notification15Days","subGoals21DayStreak","notification28Days","notificationComplete","daysCompleted","withdrawFromChallenge","put","id","_id","status","then","handleChange","event","target","value","checked","name","challengeTracker","index","userId","challenges","updatedUser","refresh","refreshActiveChallengeDetails","calculateChallengeDay","startDate","todayIndex","title","window","location","reload","goal","dailyTarget","description","number","unit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport ActiveChallengeDetails from './ActiveChallengeDetails';\nimport TrackerButton from './TrackerButton';\nimport './ActiveChallengePreview.css';\n\nexport default class ActiveChallengePreview extends Component {\n  state = {\n    challengeDay: 0,\n    activeChallengeDetails: false,\n  };\n\n  toggleChallengeDetails = () => {\n    this.setState((prevState) => ({\n      activeChallengeDetails: !prevState.activeChallengeDetails,\n    }));\n  };\n\n\n\n  selectReward = () => {\n    const rewards = this.props.user.rewards\n    const chosenRewardIndex = Math.floor(Math.random() * rewards.length)\n    return rewards[chosenRewardIndex];\n  }\n\n  notifier = () => {\n    const today = this.state.challengeDay\n    const thisProjectsTracker = this.props.challenge.tracker\n    const streakStatusData = this.props.streakStatus(this.props.challenge.tracker, today)\n    // console.log({ streakStatusData });\n\n    // console.log(`thisProjectTracker ${thisProjectsTracker}, today ${today}`);\n    // console.log({ streakStatusData });\n    // console.log(`tracker today`, thisProjectsTracker[today - 1]);\n    // console.log(`current streak`, streakStatusData.currentStreak);\n    // console.log(`this.props.challenge.subGoals7DayStreak`, this.props.challenge.subGoals7DayStreak);\n\n    //7-day streak\n    if (thisProjectsTracker[today - 1] === 1 &&\n      streakStatusData.currentStreak === 7 &&\n      this.props.challenge.subGoals7DayStreak === false) {\n      console.log(`7 day streak`);\n      this.props.challenge.subGoals7DayStreak = true;\n      let todaysReward = this.selectReward();\n      return [\"7\", todaysReward];\n      //show notification\n    }\n\n    //half-way\n    if (thisProjectsTracker[today - 1] === 1 &&\n      today >= (15 || 16 || 17) &&\n      this.props.challenge.notification15Days === false) {\n      console.log(`half way`);\n      this.props.challenge.notification15Days = true;\n      return [\"15\", {}];\n      //show a notification\n    }\n\n    //21-day streak\n    if (thisProjectsTracker[today - 1] === 1 &&\n      streakStatusData.currentStreak === 21 &&\n      this.props.challenge.subGoals21DayStreak === false) {\n      console.log(`21-day streak`);\n      this.props.challenge.subGoals21DayStreak = true;\n      let todaysReward = this.selectReward();\n      return [\"21\", todaysReward];\n      //select prize\n      //show notification\n    }\n\n    //nearly there\n    if (thisProjectsTracker[today - 1] === 1 &&\n      today === 28 &&\n      this.props.challenge.notification28Days === false) {\n      console.log(`nearly there`);\n      this.props.challenge.notification15Days = true;\n      return [28, {}];\n      //show notification\n    }\n\n    //completion\n    if (today >= 30 && this.props.challenge.notificationComplete === false) {\n      this.props.challenge.notificationComplete = true;\n      if (streakStatusData.daysCompleted === 30) {\n        return [\"success\", {}];//main goal\n      } else {\n        return [\"notQuite\", {}];\n      }\n    };\n  }\n\n  componentDidMount() {\n    const challengeDay = this.props.calculateChallengeDay(this.props.challenge.startDate);\n    this.setState({\n      challengeDay: challengeDay,\n    })\n  }\n\n  withdrawFromChallenge = () => {\n    axios.put(`/users/${this.props.challenge.id._id}/withdraw`, { status: 'withdrawn' })\n      .then(() => {\n        console.log('test')\n        // this.props.history.push('/')\n      })\n  }\n\n  handleChange = async (event) => {\n    try {\n      const target = event.target;\n      const value = target.checked;\n      const name = target.id;\n      let challengeTracker = this.props.challenge.tracker;\n      let index = target.id;\n      if (event.target.id < this.props.challengeDay) {\n        if (challengeTracker[index] === 0) {\n          challengeTracker[index]++;\n        } else if (challengeTracker[index] === 1) {\n          challengeTracker[index]++;\n        } else {\n          challengeTracker[index]--;\n        }\n        // console.log('challenge tracker after click', challengeTracker);\n        // console.log('state after click', this.state);\n        this.setState({\n          [name]: value,\n        });\n        let userId = this.state.user._id;\n        const updatedUser = await axios.put(`/api/users/${userId}`, {\n          challenges: this.state.user.challenges,\n          rewards: this.state.user.rewards,\n        });\n        const refresh = this.props.refreshActiveChallengeDetails()\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  render() {\n    const challengeDay = this.state.challengeDay\n    const todayIndex = challengeDay - 1\n    if (!this.props.challenge.id.title) {\n      window.location.reload(false);\n    } else {\n      console.log('props from preview ');\n      return (\n        <div className=\"active-preview\">\n          <div className=\"preview-title\">\n            <h5>{this.props.challenge.id.title}</h5>\n          </div>\n          <p>{this.props.challenge.id.goal}</p>\n          <p>\n            {this.props.challenge.id.dailyTarget.description}\n            {this.props.challenge.id.dailyTarget.number}\n            {this.props.challenge.id.dailyTarget.unit}\n          </p>\n\n          <div className=\"awesome-button\">\n            <p>Click below to log today: </p>\n            <TrackerButton\n              index={todayIndex}\n              user={this.props.user}\n              handleChange={this.handleChange}\n              challenge={this.props.challenge}\n              challengeDay={this.state.challengeDay}\n            />\n          </div>\n          {this.state.activeChallengeDetails && (\n            <ActiveChallengeDetails\n              challenge={this.props.challenge}\n              user={this.props.user}\n              challengeDay={this.state.challengeDay}\n              calculateChallengeDay={this.props.calculateChallengeDay}\n              streakStatus={this.props.streakStatus}\n              notifier={this.notifier}\n            />\n          )}\n          {!this.state.activeChallengeDetails && (\n            <button\n              className=\"button-light\"\n              onClick={this.toggleChallengeDetails}\n            >\n              show details\n            </button>\n          )}\n          {this.state.activeChallengeDetails && (\n            <button\n              className=\"button-light\"\n              onClick={this.toggleChallengeDetails}\n            >\n              hide details\n            </button>\n          )}\n          {this.state.activeChallengeDetails &&\n            <button\n              className=\"button-light\"\n              onClick={this.withdrawFromChallenge}\n            >\n              i give up, i'm a bit fat looser\n            </button>\n          }\n        </div>\n      );\n    }\n\n  }\n}\n"]},"metadata":{},"sourceType":"module"}