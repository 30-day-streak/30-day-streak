{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import Filter from'../filter/Filter';import OneReward from'./OneReward';import CreateReward from'./CreateReward';import'../challenges/Challenges.css';var Rewards=/*#__PURE__*/function(_Component){_inherits(Rewards,_Component);var _super=_createSuper(Rewards);function Rewards(){var _this;_classCallCheck(this,Rewards);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rewards:[],//filter\nsearchFilter:'',categoryFilter:'',favoritesFilter:false};_this.getData=function(){axios.get('/api/rewards').then(function(response){_this.setState({rewards:response.data});}).catch(function(err){return console.log(err);});};_this.setFilter=function(name,value){_this.setState(_defineProperty({},name,value));};_this.filter=function(){var favoriteIds=_this.props.user.rewards.map(function(reward){return reward._id;});if(_this.state.favoritesFilter){console.log('here');console.log('0',_this.state.rewards);return _this.state.rewards.filter(function(reward){console.log('FAV',favoriteIds,'ID',reward._id,\"?\",favoriteIds.includes(reward._id));return favoriteIds.includes(reward._id);});}else{console.log('1',_this.state.rewards);return _this.state.rewards.filter(function(reward){// search bar filter\nreturn\"\".concat(reward.name).concat(reward.description).toLowerCase().includes(_this.state.searchFilter.toLowerCase())&&(// categories filter\n_this.state.categoryFilter===reward.category||!_this.state.categoryFilter);});}};return _this;}_createClass(Rewards,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"render\",value:function render(){var _this2=this;var filtered=this.filter();console.log('filtered',filtered);console.log('2',this.state.rewards);var categories=this.state.rewards.map(function(reward){return reward.category;}).filter(function(category,index,array){return array.indexOf(category)===index;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-bar\",children:[/*#__PURE__*/_jsx(Filter,{categories:categories,setFilter:this.setFilter}),/*#__PURE__*/_jsx(Link,{to:\"/rewards/create\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/plus.png\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"challenges-container\",children:filtered.map(function(reward){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(OneReward,{reward:reward,user:_this2.props.user,filtered:filtered,getData:_this2.getData,setUser:_this2.props.setUser// toggleFavoriteReward = { this.props.toggleFavoriteReward }\n})},reward._id);})})]});}}]);return Rewards;}(Component);export{Rewards as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/rewards/Rewards.js"],"names":["React","Component","axios","Link","Filter","OneReward","CreateReward","Rewards","state","rewards","searchFilter","categoryFilter","favoritesFilter","getData","get","then","response","setState","data","catch","err","console","log","setFilter","name","value","filter","favoriteIds","props","user","map","reward","_id","includes","description","toLowerCase","category","filtered","categories","index","array","indexOf","setUser"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport {Link} from 'react-router-dom';\nimport Filter from '../filter/Filter';\nimport OneReward from './OneReward';\nimport CreateReward from './CreateReward';\nimport '../challenges/Challenges.css';\n\nexport default class Rewards extends Component {\n\n  state = {\n    rewards: [],\n    //filter\n    searchFilter: '',\n    categoryFilter: '',\n    favoritesFilter: false,\n  }\n\n  getData = () => {\n    axios.get('/api/rewards')\n      .then(response => {\n        this.setState({\n          rewards: response.data\n        })\n      })\n      .catch(err => console.log(err))\n  }\n\n  setFilter = (name, value) => {\n    this.setState({ [name]: value })\n  }\n\n  filter = () => {\n    const favoriteIds = this.props.user.rewards.map(reward => reward._id)\n\n    if (this.state.favoritesFilter) {\n      console.log('here')\n      console.log('0', this.state.rewards)\n      return this.state.rewards.filter(reward => { \n        console.log('FAV', favoriteIds, 'ID',reward._id, \"?\", favoriteIds.includes(reward._id))\n\n        return favoriteIds.includes(reward._id)\n      })\n    } else {\n      console.log('1', this.state.rewards)\n      return this.state.rewards.filter(reward => { \n        // search bar filter\n        return `${reward.name}${reward.description}`.toLowerCase().includes(this.state.searchFilter.toLowerCase()) &&\n        // categories filter\n        (this.state.categoryFilter === reward.category || !this.state.categoryFilter)\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const filtered = this.filter();\n    console.log('filtered', filtered)\n    console.log('2', this.state.rewards)\n\n\n    const categories = this.state.rewards.map(reward => { return reward.category})\n    .filter((category, index, array) => { return array.indexOf(category) === index })\n\n    return (\n      <div>\n        <div className=\"tool-bar\">\n          <Filter \n            categories={ categories }\n            setFilter={ this.setFilter }\n          />\n          <Link to=\"/rewards/create\"><img src=\"/images/plus.png\" /></Link>\n        </div>\n        \n        {/* <CreateReward {...this.props} forceRewardListUpdate={this.getData}/> */}\n        <div className=\"challenges-container\">\n          { \n            filtered.map(reward => {\n              return (\n                <div key={reward._id}>\n                  <OneReward\n                    reward={ reward }\n                    user={ this.props.user}\n                    filtered={ filtered }\n                    getData={ this.getData }\n                    setUser={ this.props.setUser }\n                    // toggleFavoriteReward = { this.props.toggleFavoriteReward }\n                  />\n                </div>\n              ) \n            })\n          }\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}