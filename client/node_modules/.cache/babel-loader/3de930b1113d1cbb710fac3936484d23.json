{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import'./challenges/Challenges.css';var OneReward=/*#__PURE__*/function(_Component){_inherits(OneReward,_Component);var _super=_createSuper(OneReward);function OneReward(){var _this;_classCallCheck(this,OneReward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={favorite:''};_this.toggleFavorite=function(){var newFavorite=!_this.state.favorite;// 1. via Apps.js\n// this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n// 2. the way it's done with challenges / different route\nvar rewardID=_this.props.reward._id;axios.put(\"/api/users/\".concat(rewardID,\"/rewardsfavorite\"),{favorite:newFavorite});// 3. toggleFavoriteReward but moved from App.js\n// const updatedUser = this.props.user;\n// console.log('newFavorite', newFavorite)\n// console.log('user', updatedUser.rewards)\n// if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n// else {\n//   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n//     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n//     return profileRewardId._id !== this.props.reward._id\n//   });\n//   console.log('updated user', updatedUser.rewards)\n//   // updatedUser.rewards.pop(this.props.reward._id);\n// }\n// this.props.setUser(updatedUser);\n// axios.put(`/users/${updatedUser._id}`, {\n//   rewards: updatedUser.rewards\n// })\n//update state\n_this.setState({favorite:newFavorite});// refresh data\n_this.props.getData();};_this.initialSetUp=function(){var foundInUserFavorites=_this.props.user.rewards.some(function(reward){return reward._id===_this.props.reward._id;});_this.setState({favorite:foundInUserFavorites});};return _this;}_createClass(OneReward,[{key:\"componentDidMount\",value:function componentDidMount(){this.initialSetUp();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.filtered.length!==this.props.filtered.length){this.initialSetUp();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.props.reward.category}),/*#__PURE__*/_jsx(\"img\",{src:this.state.favorite?'/images/favorite.png':'/images/unfavorite.png',onClick:this.toggleFavorite,alt:\"favorite\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:this.props.reward.name}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:this.props.reward.description&&this.props.reward.description}),this.props.reward.url&&/*#__PURE__*/_jsx(\"a\",{href:\"{this.props.reward.url}\",children:\"Link\"})]},this.props.reward._id);}}]);return OneReward;}(Component);export{OneReward as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/OneReward.js"],"names":["React","Component","axios","OneReward","state","favorite","toggleFavorite","newFavorite","rewardID","props","reward","_id","put","setState","getData","initialSetUp","foundInUserFavorites","user","rewards","some","prevProps","prevState","filtered","length","category","name","description","url"],"mappings":"4vBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,6BAAP,C,GAEqBC,CAAAA,S,uUAEnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,C,OAIRC,c,CAAiB,UAAM,CACrB,GAAMC,CAAAA,WAAW,CAAG,CAAC,MAAKH,KAAL,CAAWC,QAAhC,CAEA;AACA;AAEA;AACA,GAAMG,CAAAA,QAAQ,CAAG,MAAKC,KAAL,CAAWC,MAAX,CAAkBC,GAAnC,CACAT,KAAK,CAACU,GAAN,sBAAwBJ,QAAxB,qBAAoD,CAClDH,QAAQ,CAAEE,WADwC,CAApD,EAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAKM,QAAL,CAAc,CAAER,QAAQ,CAAEE,WAAZ,CAAd,EAEA;AACA,MAAKE,KAAL,CAAWK,OAAX,GACD,C,OAEDC,Y,CAAe,UAAM,CACnB,GAAMC,CAAAA,oBAAoB,CAAG,MAAKP,KAAL,CAAWQ,IAAX,CAAgBC,OAAhB,CAAwBC,IAAxB,CAA6B,SAAAT,MAAM,CAAI,CAClE,MAAOA,CAAAA,MAAM,CAACC,GAAP,GAAe,MAAKF,KAAL,CAAWC,MAAX,CAAkBC,GAAxC,CACD,CAF4B,CAA7B,CAIA,MAAKE,QAAL,CAAc,CACZR,QAAQ,CAAEW,oBADE,CAAd,EAGD,C,kGAEmB,CAClB,KAAKD,YAAL,GACD,C,8DAEkBK,S,CAAWC,S,CAAW,CACvC,GAAID,SAAS,CAACE,QAAV,CAAmBC,MAAnB,GAA8B,KAAKd,KAAL,CAAWa,QAAX,CAAoBC,MAAtD,CAA8D,CAC5D,KAAKR,YAAL,GACD,CACF,C,uCAEQ,CACP,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,mBAAK,KAAKN,KAAL,CAAWC,MAAX,CAAkBc,QAAvB,EADF,cAEE,YAAK,GAAG,CAAG,KAAKpB,KAAL,CAAWC,QAAX,CAAsB,sBAAtB,CAA+C,wBAA1D,CAAoF,OAAO,CAAE,KAAKC,cAAlG,CAAkH,GAAG,CAAC,UAAtH,EAFF,GADF,cAKE,oBAAM,KAAKG,KAAL,CAAWC,MAAX,CAAkBe,IAAxB,EALF,cAME,aANF,cAOE,mBAAK,KAAKhB,KAAL,CAAWC,MAAX,CAAkBgB,WAAlB,EAAiC,KAAKjB,KAAL,CAAWC,MAAX,CAAkBgB,WAAxD,EAPF,CASI,KAAKjB,KAAL,CAAWC,MAAX,CAAkBiB,GAAlB,eAAyB,UAAG,IAAI,CAAC,yBAAR,kBAT7B,GAA2B,KAAKlB,KAAL,CAAWC,MAAX,CAAkBC,GAA7C,CADF,CAaD,C,uBA7EoCV,S,SAAlBE,S","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport './challenges/Challenges.css';\n\nexport default class OneReward extends Component {\n\n  state = {\n    favorite: '',\n  };\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite\n\n    // 1. via Apps.js\n    // this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n\n    // 2. the way it's done with challenges / different route\n    const rewardID = this.props.reward._id;\n    axios.put(`/api/users/${rewardID}/rewardsfavorite`, {\n      favorite: newFavorite,\n    })\n\n    // 3. toggleFavoriteReward but moved from App.js\n    // const updatedUser = this.props.user;\n    // console.log('newFavorite', newFavorite)\n    // console.log('user', updatedUser.rewards)\n    // if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n    // else {\n    //   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n    //     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n    //     return profileRewardId._id !== this.props.reward._id\n    //   });\n    //   console.log('updated user', updatedUser.rewards)\n    //   // updatedUser.rewards.pop(this.props.reward._id);\n    // }\n    // this.props.setUser(updatedUser);\n    // axios.put(`/users/${updatedUser._id}`, {\n    //   rewards: updatedUser.rewards\n    // })\n\n    //update state\n    this.setState({ favorite: newFavorite });\n    \n    // refresh data\n    this.props.getData()\n  }\n\n  initialSetUp = () => {\n    const foundInUserFavorites = this.props.user.rewards.some(reward => {\n      return reward._id === this.props.reward._id;\n    })\n\n    this.setState({\n      favorite: foundInUserFavorites\n    })\n  }\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      this.initialSetUp()\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"card\" key={this.props.reward._id}>\n        <div className=\"card-header\">\n          <p>{ this.props.reward.category }</p>\n          <img src={ this.state.favorite ? '/images/favorite.png' : '/images/unfavorite.png'} onClick={this.toggleFavorite} alt=\"favorite\" />\n        </div>\n        <h3>{ this.props.reward.name }</h3>\n        <hr/>\n        <p>{ this.props.reward.description && this.props.reward.description }</p>\n  \n        { this.props.reward.url && <a href=\"{this.props.reward.url}\">Link</a>}\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}