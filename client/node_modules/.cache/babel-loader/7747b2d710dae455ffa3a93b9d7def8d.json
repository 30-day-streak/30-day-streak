{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/markkeeble/Ironhack/course/30-day-streak/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import'./Challenges.css';var OneChallenge=/*#__PURE__*/function(_Component){_inherits(OneChallenge,_Component);var _super=_createSuper(OneChallenge);function OneChallenge(){var _this;_classCallCheck(this,OneChallenge);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={favorite:''};_this.toggleFavorite=function(){var newFavorite=!_this.state.favorite;// change state\n_this.setState({favorite:newFavorite});// update database\nvar challengeID=_this.props.challenge._id;axios.put(\"/api/users/\".concat(challengeID,\"/challengesfavorite\"),{favorite:newFavorite});//refresh displayed information\n_this.props.getData();};_this.initialSetUp=function(){//find instead of some?\n// console.log(this.props.user.challenges)\nvar foundInUserFavorites=_this.props.user.challenges.some(function(challenge){return challenge.id._id===_this.props.challenge._id&&challenge.status==='favorite';});_this.setState({favorite:foundInUserFavorites});};return _this;}_createClass(OneChallenge,[{key:\"componentDidMount\",value:function componentDidMount(){this.initialSetUp();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.filtered.length!==this.props.filtered.length){this.initialSetUp();}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:this.props.challenge.category}),/*#__PURE__*/_jsx(\"img\",{src:this.state.favorite?'/images/favorite1.png':'/images/unfavorite1.png',onClick:this.toggleFavorite,alt:\"favorite\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:this.props.challenge.title}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:this.props.challenge.goal&&this.props.challenge.goal}),/*#__PURE__*/_jsx(Link,{to:\"/challenges/\".concat(this.props.challenge._id,\"/start\"),children:/*#__PURE__*/_jsx(\"button\",{children:\"Start\"})})]},this.props.challenge._id)});}}]);return OneChallenge;}(Component);export{OneChallenge as default};","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/challenges/OneChallenge.js"],"names":["React","Component","Link","axios","OneChallenge","state","favorite","toggleFavorite","newFavorite","setState","challengeID","props","challenge","_id","put","getData","initialSetUp","foundInUserFavorites","user","challenges","some","id","status","prevProps","prevState","filtered","length","category","title","goal"],"mappings":"izBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,C,GAEqBC,CAAAA,Y,mVAEnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,C,OAIRC,c,CAAiB,UAAM,CACrB,GAAMC,CAAAA,WAAW,CAAG,CAAC,MAAKH,KAAL,CAAWC,QAAhC,CACA;AACA,MAAKG,QAAL,CAAc,CAAEH,QAAQ,CAAEE,WAAZ,CAAd,EACA;AACA,GAAME,CAAAA,WAAW,CAAG,MAAKC,KAAL,CAAWC,SAAX,CAAqBC,GAAzC,CACAV,KAAK,CAACW,GAAN,sBAAwBJ,WAAxB,wBAA0D,CACxDJ,QAAQ,CAAEE,WAD8C,CAA1D,EAGA;AACA,MAAKG,KAAL,CAAWI,OAAX,GACD,C,OAEDC,Y,CAAe,UAAM,CACnB;AACA;AACA,GAAMC,CAAAA,oBAAoB,CAAG,MAAKN,KAAL,CAAWO,IAAX,CAAgBC,UAAhB,CAA2BC,IAA3B,CAAgC,SAAAR,SAAS,CAAI,CACxE,MAAOA,CAAAA,SAAS,CAACS,EAAV,CAAaR,GAAb,GAAqB,MAAKF,KAAL,CAAWC,SAAX,CAAqBC,GAA1C,EAAiDD,SAAS,CAACU,MAAV,GAAqB,UAA7E,CACD,CAF4B,CAA7B,CAIA,MAAKb,QAAL,CAAc,CACZH,QAAQ,CAAEW,oBADE,CAAd,EAGD,C,qGAEmB,CAClB,KAAKD,YAAL,GACD,C,8DAEkBO,S,CAAWC,S,CAAW,CACvC,GAAID,SAAS,CAACE,QAAV,CAAmBC,MAAnB,GAA8B,KAAKf,KAAL,CAAWc,QAAX,CAAoBC,MAAtD,CAA8D,CAC5D,KAAKV,YAAL,GACD,CACF,C,uCAEQ,CACP,mBACE,sCAEE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,mBAAK,KAAKL,KAAL,CAAWC,SAAX,CAAqBe,QAA1B,EADF,cAEE,YAAK,GAAG,CAAE,KAAKtB,KAAL,CAAWC,QAAX,CAAsB,uBAAtB,CAAgD,yBAA1D,CAAqF,OAAO,CAAG,KAAKC,cAApG,CAAqH,GAAG,CAAC,UAAzH,EAFF,GADF,cAKE,oBAAM,KAAKI,KAAL,CAAWC,SAAX,CAAqBgB,KAA3B,EALF,cAME,aANF,cAOE,mBAAK,KAAKjB,KAAL,CAAWC,SAAX,CAAqBiB,IAArB,EAA6B,KAAKlB,KAAL,CAAWC,SAAX,CAAqBiB,IAAvD,EAPF,cAQE,KAAC,IAAD,EAAM,EAAE,uBAAiB,KAAKlB,KAAL,CAAWC,SAAX,CAAqBC,GAAtC,UAAR,uBAA2D,iCAA3D,EARF,GAA4B,KAAKF,KAAL,CAAWC,SAAX,CAAqBC,GAAjD,CAFF,EADF,CAgBD,C,0BA1DuCZ,S,SAArBG,Y","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './Challenges.css';\n\nexport default class OneChallenge extends Component {\n\n  state = {\n    favorite: '',\n  }\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite;\n    // change state\n    this.setState({ favorite: newFavorite });\n    // update database\n    const challengeID = this.props.challenge._id;\n    axios.put(`/api/users/${challengeID}/challengesfavorite`, {\n      favorite: newFavorite,\n    })\n    //refresh displayed information\n    this.props.getData()\n  }\n\n  initialSetUp = () => {\n    //find instead of some?\n    // console.log(this.props.user.challenges)\n    const foundInUserFavorites = this.props.user.challenges.some(challenge => {\n      return challenge.id._id === this.props.challenge._id && challenge.status === 'favorite'\n    })\n\n    this.setState({ \n      favorite: foundInUserFavorites,\n    })\n  }\n\n  componentDidMount() {\n    this.initialSetUp()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      this.initialSetUp()\n    }\n  }\n\n  render() {\n    return (\n      <>\n      {/* <div class=\"container center\"> */}\n        <div className=\"card\" key={ this.props.challenge._id }>\n          <div className='card-header'>\n            <p>{ this.props.challenge.category }</p>\n            <img src={this.state.favorite ? '/images/favorite1.png' : '/images/unfavorite1.png'} onClick={ this.toggleFavorite } alt=\"favorite\" />\n          </div>\n          <h3>{ this.props.challenge.title }</h3>\n          <hr/>\n          <p>{ this.props.challenge.goal && this.props.challenge.goal }</p>\n          <Link to={`/challenges/${this.props.challenge._id}/start`}><button>Start</button></Link>\n        </div>\n      {/* </div> */}\n    </>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}