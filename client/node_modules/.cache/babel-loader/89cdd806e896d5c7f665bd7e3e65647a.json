{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/OneReward.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nexport default class OneReward extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      favorite: false\n    };\n\n    this.toggleFavorite = () => {\n      const newFavorite = !this.state.favorite; // 1. via Apps.js\n      // this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n      // 2. the way it's done with challenges / different route\n\n      const rewardID = this.props.reward._id;\n      axios.put(`/users/${rewardID}/rewardsfavorite`, {\n        favorite: newFavorite\n      }); // 3. toggleFavoriteReward but moved from App.js\n      // const updatedUser = this.props.user;\n      // console.log('newFavorite', newFavorite)\n      // console.log('user', updatedUser.rewards)\n      // if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n      // else {\n      //   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n      //     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n      //     return profileRewardId._id !== this.props.reward._id\n      //   });\n      //   console.log('updated user', updatedUser.rewards)\n      //   // updatedUser.rewards.pop(this.props.reward._id);\n      // }\n      // this.props.setUser(updatedUser);\n      // axios.put(`/users/${updatedUser._id}`, {\n      //   rewards: updatedUser.rewards\n      // })\n      //update state\n\n      this.setState({\n        favorite: newFavorite\n      }); // refresh data\n\n      this.props.getData();\n      console.log('refresh');\n    };\n\n    this.initialSetUp = () => {\n      const foundInUserFavorites = this.props.user.rewards.some(reward => {\n        return reward._id === this.props.reward._id;\n      });\n      this.setState({\n        favorite: foundInUserFavorites\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('this', this.state.favorite, 'prev', prevState.favorite, prevState.favorite !== this.state.favorite);\n\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      console.log('toggle');\n      this.initialSetUp();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: this.props.reward._id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: this.props.reward.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), this.props.reward.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.props.reward.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 44\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: this.props.reward.category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), this.props.reward.url && /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"{this.props.reward.url}\",\n        children: \"Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: this.state.favorite ? '/images/favorite.png' : '/images/unfavorite.png',\n        style: {\n          width: \"50px\"\n        },\n        onClick: this.toggleFavorite,\n        alt: \"favorite\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, this.props.reward._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/markkeeble/Ironhack/course/30-day-streak/client/src/components/OneReward.js"],"names":["React","Component","axios","OneReward","state","favorite","toggleFavorite","newFavorite","rewardID","props","reward","_id","put","setState","getData","console","log","initialSetUp","foundInUserFavorites","user","rewards","some","componentDidMount","componentDidUpdate","prevProps","prevState","filtered","length","render","name","description","category","url","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\n\nexport default class OneReward extends Component {\n  state = {\n    favorite: false\n  };\n\n  toggleFavorite = () => {\n    const newFavorite = !this.state.favorite\n\n    // 1. via Apps.js\n    // this.props.toggleFavoriteReward(this.props.reward._id, newFavorite);\n\n    // 2. the way it's done with challenges / different route\n    const rewardID = this.props.reward._id;\n    axios.put(`/users/${rewardID}/rewardsfavorite`, {\n      favorite: newFavorite,\n    })\n\n    // 3. toggleFavoriteReward but moved from App.js\n    // const updatedUser = this.props.user;\n    // console.log('newFavorite', newFavorite)\n    // console.log('user', updatedUser.rewards)\n    // if (newFavorite) updatedUser.rewards.push(this.props.reward._id);\n    // else {\n    //   updatedUser.rewards = updatedUser.rewards.filter(profileRewardId => {\n    //     console.log(profileRewardId._id, this.props.reward._id, profileRewardId._id !== this.props.reward._id)\n    //     return profileRewardId._id !== this.props.reward._id\n    //   });\n    //   console.log('updated user', updatedUser.rewards)\n    //   // updatedUser.rewards.pop(this.props.reward._id);\n    // }\n    // this.props.setUser(updatedUser);\n    // axios.put(`/users/${updatedUser._id}`, {\n    //   rewards: updatedUser.rewards\n    // })\n\n    //update state\n    this.setState({ favorite: newFavorite });\n    \n    // refresh data\n    this.props.getData()\n    console.log('refresh')\n  }\n\n  initialSetUp = () => {\n    const foundInUserFavorites = this.props.user.rewards.some(reward => {\n      return reward._id === this.props.reward._id;\n    })\n\n    this.setState({\n      favorite: foundInUserFavorites\n    })\n  }\n\n  componentDidMount() {\n    this.initialSetUp();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('this', this.state.favorite, 'prev', prevState.favorite, prevState.favorite !== this.state.favorite)\n    if (prevProps.filtered.length !== this.props.filtered.length) {\n      console.log('toggle')\n      this.initialSetUp()\n    }\n  }\n\n  render() {\n    return (\n      <form className=\"card\" key={this.props.reward._id}>\n        <div className=\"card-header\">\n          <p>{this.props.reward._id}</p>\n          <h2>{this.props.reward.name}</h2>\n        </div>\n        { this.props.reward.description && <p>{this.props.reward.description}</p>}\n        <p>{this.props.reward.category}</p>\n        { this.props.reward.url && <a href=\"{this.props.reward.url}\">Link</a>}\n        <img src={this.state.favorite ? '/images/favorite.png' : '/images/unfavorite.png'} style={{ width: \"50px\" }} onClick={this.toggleFavorite} alt=\"favorite\" />\n      </form>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}